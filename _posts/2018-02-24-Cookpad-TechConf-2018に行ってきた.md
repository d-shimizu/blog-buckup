---
layout: post
Categories:  ["tech"]
Description:  " Cookpad TechConf 2018 に行ってきた。  2016年からやっているそうで、僕は今年初めて参加した。場所は恵比寿ガーデンプレイス ザ・ガーデンホールというところで、参加人数は600人くらいいた模様。 "
Tags: ["other", "tech", "イベント"]
date: "2018-02-24T10:54:00+09:00"
title: "Cookpad TechConf 2018に行ってきた"
author: "dshimizu"
archive: ["2018"]
draft: "true"
---

<body>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a> TechConf 2018 に行ってきた。</p>

<iframe src="https://hatenablog-parts.com/embed?url=https://techconf.cookpad.com/2018/" title="Cookpad TechConf 2018" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe>


<p>2016年からやっているそうで、僕は今年初めて参加した。
場所は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%C3%C8%E6%BC%F7%A5%AC%A1%BC%A5%C7%A5%F3%A5%D7%A5%EC%A5%A4%A5%B9">恵比寿ガーデンプレイス</a> ザ・ガーデンホールというところで、参加人数は600人くらいいた模様。</p>
</body>

<!-- more -->

<body>
<p>まずいきなり驚いたのは司会進行が<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a> pollyだったこと。
しゃべり方は「もやもやさまぁ～ず」のナレーションのような感じで、特におかしなところはなく司会進行を行っていた。それどころか公演中に会場内で携帯電話の着信音が鳴り響いた後で、携帯はマナーモードにしてみたいなことを言ったあとで「ご機嫌なBGMは私がご用意します」といったユーモアあふれるコメントをするなど、かなりいい感じだった。</p>

<h3>セッション</h3>


<h4>基調講演: 毎日の料理を楽しみにする挑戦をし続けた20年 / 橋本 健太 様 / 13:10 - 13:30</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/hashikem/mei-ri-falseliao-li-wole-siminisuru-tiao-zhan-wosisok-keta20nian" target="_brank" rel="noopener noreferrer">毎日の料理を楽しみにする 挑戦をし続けた20年 </a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=DjHaGRGT1Z4" target="_brank" rel="noopener noreferrer">毎日の料理を楽しみにする挑戦をし続けた20年 - 橋本 健太 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>の創業時のお話、その後テックカンパニーとしての<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>について、グローバル展開について、新プロジェクトについて、最後にこれまでの取り組みの話がありました。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/CookPad">CookPad</a>は料理レシピのサービスの会社ではなく「毎日の料理を楽しみにする会社」。そうした<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>にとってのテク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CE%A5%ED">ノロ</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B8%A1%BC">ジー</a>とは以下を実現する方法論であるとのこと。</p>

<ul>
    <li>料理が楽しくなる</li>
    <li>ユーザの生活の役に立つ</li>
    <li>今の技術を活かせる</li>
</ul>


<p>明確な企業理念に則った上での技術への向き合い方や採用方針は、企業文化を作る上で良さそうだと思った。</p>

<p>サービスを立ち上げるときの手法として最近はSprintという開発手法を使っているとのこと。</p>

<p><a target="_blank" href="https://www.amazon.co.jp/exec/obidos/ASIN/447806699X/hatena-blog-22/?&amp;_encoding=UTF8&amp;tag=dshimizu05-22&amp;linkCode=ur2&amp;linkId=638769d15c4f6167ea0ae58fff491048&amp;camp=247&amp;creative=1211" rel="noopener noreferrer">SPRINT 最速仕事術――あらゆる仕事がうまくいく最も合理的な方法</a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=dshimizu05-22&amp;l=ur2&amp;o=9" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"></p>

<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>の "体系的" サービス開発 / 新井 康平 様 / 13:30 - 13:50</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/spicycoffee/systematic-service-development-at-cookpad" taraget="_brank" rel="noopener">クックパッドの "体系的" サービス開発 / "Systematic" service development at cookpad // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=jSLMpmmm0U8" target="_brank" rel="noopener noreferrer">クックパッドの “体系的” サービス開発 - 新井 康平 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>でのサービス開発の難しさに対する取り組み、開発のためのサイクルの回し方についてのお話だった。</p>

<p>サービス開発の最初の段階で、実施しようとしている施策に対する仮説の検証では、BML(Build, Mesucre Learn)ループを用いているとのこと。
これをうまく回すために、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%F3%A5%C1%A5%D1%A5%BF%A1%BC%A5%F3">アンチパターン</a>の例の説明があった上で、「BMLループを前から順番にやろうとしてはいけない」というのは説得力があった。</p>

<p>また、これらのサイクルをうまく回すために使っているという社内ツールの話では、様々なデータが見れる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C0%A5%C3%A5%B7%A5%E5">ダッシュ</a>ボードや、分析レポートの運用方法についての話が良かった。
各種分析レポートを Report.md という形で <a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a> で作って <a class="keyword" href="http://d.hatena.ne.jp/keyword/Github">Github</a> にPRし、レビューが通ったものを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>にマージする、というのはきちんとした情報が蓄積されてよさそう。</p>

<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>クリエイティブワークフロー / 辻 朝也 様 / 13:50 - 14:10</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/1020tomoya/cookpad-creative-workflow" target="_blank" rel="noopener noreferrer">クックパッドクリエイティブワークフロー / cookpad creative workflow // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=Uu0s5m5DrLU" target="_blank" rel="noopener noreferrer">クックパッドクリエイティブワークフロー - 辻 朝也 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p>デザイナーの方からの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>のサービス開発体制、事例、デザイナーの取り組みのお話だった。</p>

<p>チーム構成としては、投稿や検索といったサービス上の機能単位ごとでチームになっているらしい。
一つのチームの中にオーナー、デザイナー、各種エンジニアがいて、互いをフォローしあえるような形になっているとのこと。例えばディレクターは他部署とのコミュニケーションをうまくとったりユーザ目線に立った形で開発プロジェクトを進めたり、逆にエンジニアだと技術的な判断が得意だったり、それぞれの得意な部分を組み合わせて補えるような形にしている。こういうチーム体制だとコンテキストのズレとかが少なくてスピードある対応ができそう。</p>

<p>開発サイクルは基本的に2週間～1か月。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Github">Github</a> Issueをいろいろ活用しているらしい。</p>

<ul>
    <li>ア<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%C7%A5%A2">イデア</a>を<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> issueに集めて、定期的に全員で検討</li>
    <li>デザインレビューを<a class="keyword" href="http://d.hatena.ne.jp/keyword/Github">Github</a> Issue上で、目的、背景、デザインの意図を明確にした上で横串で行う。</li>
    <li>前の発表でも出てきたReport.md。施策に関する情報(仮説、試算、実数、考察、次のアクション)は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Github">Github</a> の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>上で管理して、PR、レビューしたり誰でも参照できるようにしているらしい。</li>
</ul>


<p>デザイナーのロールでもサービスを横断的にみるための組織作りについてすごく考えられてて実践されている印象だった。</p>

<h4>What/How to design test automation for mobile / 松尾 和昭 様 / 14:20 - 14:40</h4>


<ul>
    <li>資料: <a href="https://www.slideshare.net/KazuMatsu/cookpadtechcond2018mobiletestautomation" target="_blank" rel="noopener noreferrer">CookpadTechConf2018-(Mobile)TestAutomation</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=hjsvm2pmORk" target="_blank" rel="noopener noreferrer">What/How to design test automation for mobile - 松尾 和昭 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p>モバイルのテスト自動化についてのお話だった。</p>

<p>テストを実施するにあたっての各開発者間でのコンテキストの差。どういう視点、意図でテストをするか。
開発スピードを上げたいのか、人手による不確定な作業を減らしたいのか、理想の開発手法を構築したいのか、自動化という文化を作りたいのか。</p>

<p>独自の項目としてSPLITという5つのキーワードにして、テストに関する問題を分割して考えるというやり方を紹介されていた。</p>

<ul>
    <li>Scope…テストの対象範囲</li>
    <li>Phase…テストを分割する上でどのフェーズのものをテストするのか？通常の開発サイクルではなく、リリースを起点として開発環境・本番環境のどちらをテストするのか。</li>
    <li>Level…どこまでテスト自動化を行うか。何をどこまでやってどう計測していくのか。</li>
    <li>sIze…どういう単位でテストを自動化するか。単体、結合、OS、ネットワーク…etc</li>
    <li>Type…どのようなタイプの目的を持ったテストをするか。</li>
</ul>


<p>(参考)</p>

<ul>
    <li>
<a href="https://testing.googleblog.com/2010/12/test-sizes.html" target="_brank" rel="noopener noreferrer" google="" testing="" blog:="" test="" a=""></a><a href="http://www.informit.com/articles/article.aspx?p=2253544&amp;ranMID=24808" target="_brank" rel="noopener noreferrer">Using Models to Help Plan Tests in Agile Projects | Agile Testing Quadrants | InformIT</a>
</li>
</ul>


<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>の会社でRustを書くということ / 小林 秀和 様 / 14:40 - 15:00</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/koba789/rubyfalsehui-she-derustwoshu-kutoiukoto" target="_blank" rel="noopener noreferrer">Rubyの会社でRustを書くということ // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=meU7D0BLmtY" target="_blank" rel="noopener noreferrer">Rubyの会社でRustを書くということ - 小林 秀和 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a> といえば <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> のイメージが強かったけど、特にそれに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B8%C7%BC%B9">固執</a>しているわけではないとのこと。
マイクロサービス化が進んでいるそうで、それに伴って様々なサービスから使えてパフォーマンスも出せるような柔軟なPush通知配信基盤を作るためにRustを選択したとのこと。
マルチスレッドプログラミングを書くときデータ競合のある可能性のあるコードを、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%E9">コンパイラ</a>が検知してエラーかWarningかを出してくれたりするらしい。
ただ、「Rustはより高速なプログラムを書くための機能がしっかりしているのであって、高速なプログラムを書くのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>の仕事」というのはその通りだなと。</p>

<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/cookpad">cookpad</a> storeTV 〜<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>初のハードウェア開発〜 / 今井 晨介 様 / 15:00 - 15:20</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/shinsuke_imai/cookpad-storetv-kutukupatudochu-falsehadoueakai-fa" target="_blank" rel="noopener noreferrer">cookpad storeTV ~クックパッド初のハードウェア開発~ // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=p11yzJxPKAE" target="_blank" rel="noopener noreferrer">cookpad storeTV 〜クックパッド初のハードウェア開発〜 - 今井 晨介 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p>スーパーに設置して料理動画を配信するサイネージである<a class="keyword" href="http://d.hatena.ne.jp/keyword/cookpad">cookpad</a> storeTVのお話だった。</p>

<p>物理的な開発を伴うため時間はかかったそうだがソフトウェア開発と同じような改善サイクルを回したそう。
HW部分等の自社にとって不得意な部分は外部に任せるという戦略を取られたとのことで中国の工場で作ったそうだが、ロゴが微妙に違ったりという問題があり任せきりはダメだと分かったとのこと。「任せきりはだめ」というのは何にでもいえそう。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MDM">MDM</a>でデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>の一元管理し、アプリのアップデートを管理者側でコン<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%ED%A1%BC%A5%EB">トロール</a>できるようにし、高速な改善サイクルを実現できたらしい。</p>

<p>収益化の仕組みとしては料理動画のあとに広告を流しているとのこと。また、広告の機能として、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%D6%A5%EC%A5%C3%A5%C8">タブレット</a>のインカメラでどれだけの人が広告を見ているかを計測しているらしい。個人情報を残さず端末でカウントアップを行っているということだった。顔認識の機能は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%D6%A5%EC%A5%C3%A5%C8">タブレット</a>の計算資源を多量に使うので、集合写真を用いて顔認証がきちんと動作するか検証しているらしい。</p>

<h4>Lifestyle Product Award授賞式 / 15:50 - 16:00</h4>


<p>昨年開催された Lifestyle Product Award by <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a> というものの表彰式が行われた。</p>

<ul>
    <li><a href="https://product-award.cookpad.com/" target="_brank" rel="noopener noreferrer">2017 Lifestyle Product Award by Cookpad</a></li>
</ul>


<p>優秀賞として<a class="keyword" href="http://d.hatena.ne.jp/keyword/GOKURI">GOKURI</a>という飲み込みの能力を計測するためのデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>が選出された。</p>

<ul>
    <li><a href="http://www.ai.iit.tsukuba.ac.jp/gokuri/" target="_brank" rel="noopener noreferrer">GOKURI | 人工知能が嚥下を測る</a></li>
</ul>


<h4>Challenges for Global Service from a Perspective of SRE / 渡辺 喬之 様 / 16:00 - 16:20</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/takanabe/challenges-for-global-service-from-a-perspective-of-sre" target="_blank" rel="noopener noreferrer">Challenges for Global Service from a Perspective of SRE // Speaker Deck</a>
</li>
    <li>動画: <a href="http://www.youtube.com/watch?v=cd7EUSp7XIY" target="_blank" rel="noopener noreferrer">Challenges for Global Service from a Perspective of SRE - 渡辺 喬之 (Cookpad TechConf 2018)</a>
</li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>のグロー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%EB%A5%B5">バルサ</a>ービスについて、グロー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%EB%A5%B5">バルサ</a>ービスの今、SREの課題や取り組みに関する内容でした。</p>

<p>海外の開発拠点はイギリスオフィスだそうだが、スタッフやコミュニティマネージャーは世界中にいるらしい。コードは日本のものとは異なるとのこと。</p>

<p>世界的にサービスを展開していることで生じる課題として、ユーザ体験に違いがあるとのこと。ここでのユーザ体験とはどういうものか説明はなかったと思うけど、サービスのレスポンスのことを差していたと思う。
問題や改善についての詳細については以下のブログ記事の内容の通りだったので、僕がグダグダ書くより以下の記事と動画、資料を参照したほうがよさそう。</p>

<ul>
    <li><a href="http://techlife.cookpad.com/entry/2017/09/21/080000" target="_brank" rel="noopener noreferrer">Synthetic Monitoring を活用したグローバルサービスのネットワークレイテンシの測定と改善 - クックパッド開発者ブログ</a></li>
</ul>


<p>そのほかとしては、各国で行われるイベントのタイミングでリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トの増加が発生するが、各国のイベントが重なることでさらにリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>ト数が増加して負荷が高まるので、対策としてスケーラビリティの高いシステムにするためにAuroraを導入したり、ECS＋<a href="https://github.com/eagletmt/hako" target="_brank" rel="noopener noreferrer">hako</a>によるデプロイ環境の整備、メトリックスを閲覧できる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C0%A5%C3%A5%B7%A5%E5">ダッシュ</a>ボードの整備をしたり、</p>

<ul>
    <li><a href="https://github.com/eagletmt/hako" target="_brank" rel="noopener noreferrer">GitHub - eagletmt/hako: Deploy Docker image</a></li>
</ul>


<p>世界中からデプロイが正常にできるようRundeck等を用いたデプロイ環境の整備を行ったりしたそう。</p>

<p>後はToilの撲滅。</p>

<ul>
    <li>手動で対応している</li>
    <li>自動化の余地がある</li>
    <li>繰り返し発生する</li>
    <li>発生してからじゃないと対応できない</li>
    <li>サービスの改善につながらない</li>
    <li>サービスやユーザーの数に応じて増加</li>
</ul>


<p>セッション内ではアカウント管理周りについて言及されていた。たくさんのツールを利用されていてSSOに対応してないものとかがあると、世界中のメンバーのアカウント管理は確かに大変そう。
解決策として Nginx + omniauth を用いて、アカウント作成等の権限を委譲していたったらしい。</p>

<p>Synthetic Monitoring を活用したグロー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%EB%A5%B5">バルサ</a>ービスのネットワークレイテンシの測定と改善 - <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>開発者ブログ</p>

<h4>動き出した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%C3%A5%AF%A5%D1%A5%C3%A5%C9">クックパッド</a>のCtoCビジネス / 村本 章憲 様 / 16:20 - 16:40</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/1amageek/dong-kichu-sitakutukupatudofalsectocbizinesu" target="_blank" rel="noopener noreferrer">動き出したクックパッドのCtoCビジネス // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=4bskNJ7CsJM" target="_blank" rel="noopener noreferrer">動き出したクックパッドのCtoCビジネス - 村本 章憲 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>の新規事業のプロダクト「Komerco」というものについてのお話だった。
ク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%A8%A1%BC%A5%BF">リエータ</a>ーと料理をする人々を結びつけるサービスらしい。</p>

<p>スピーディーな開発を行うことを目的としていろいろ検討した結果、Firebaseが良いのではないか、という判断のもと採用したそうで、それによりサーバサイドエンジニアなしのサーバレスという形で開発を行っているらしい。
Firebase Japan User Group を立ち上げてコミュニティを盛り上げるのにも貢献しているそう。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/OSS">OSS</a>を利用するだけではなく、 Komerco で使っている技術を<a class="keyword" href="http://d.hatena.ne.jp/keyword/OSS">OSS</a>として公開しているらしい。</p>

<ul>
    <li><a href="https://github.com/sgr-ksmt/Alertift" target="_brank" rel="noopener noreferrer">GitHub - sgr-ksmt/Alertift: Swifty, modern UIAlertController wrapper.</a></li>
    <li><a href="https://github.com/sgr-ksmt/Lobster" target="_brank" rel="noopener noreferrer">GitHub - sgr-ksmt/Lobster: ? Type-safe Firebase-RemoteConfig helper library ?</a></li>
    <li><a href="https://github.com/miuP/Tsuchi" target="_brank" rel="noopener noreferrer">GitHub - miuP/Tsuchi: Firebase Cloud Messaging wrapper.</a></li>
    <li><a href="https://github.com/starhoshi/Orderable" target="_brank" rel="noopener noreferrer">GitHub - starhoshi/Orderable: An order processing framework works with Cloud Functions for Firebase</a></li>
    <li><a href="https://github.com/starhoshi/Orderable.ts" target="_brank" rel="noopener noreferrer">GitHub - starhoshi/orderable.ts: An order processing framework works with Cloud Functions for Firebase</a></li>
</ul>


<h4>Solve "unsolved" image recognition problems in service applications / 菊田 遥平 様 / 16:50 - 17:10</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/diracdiego/20180210-cookpad-techconf2018-yoheikikuta" target="_blank" rel="noopener noreferrer">20180210_Cookpad_TechConf2018_YoheiKIKUTA // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=YevGEgo_MIg" target="_blank" rel="noopener noreferrer">Solve "unsolved" image recognition problems in service applications - 菊田 遥平 (Cookpad TechConf 201... </a>
</li>
</ul>


<p>MLを用いた画像分析に関するお話だった。
ML領域は全く手を付けたことがなく、セッション内容も高速だったのでその場ではなかなか理解できないところが多かった。
資料や参考URLの内容をあとでしっかり読み直す。</p>

<p>以下はメモまとめ。</p>

<p>チームは19名(学生アルバイト込み)、1年半前は4－5名だったそうなので、かなり大きくなっている印象。
料理の専門知識を持ってデータにラベルを付けるアノテータ、データを使って<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>をする人、新しいデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>を使って新しい料理体験を提供する人、食文化を研究する人、基盤整備する人などなどいろんなメンバーがいるらしい。</p>

<p>取り組みとしてはサービスに直結するものだけではなく、ML系の論文を発表したり発表したりと多岐にわたって取り組みを行っているとのこと。</p>

<ul>
    <li><a href="http://techlife.cookpad.com/entry/2017/09/14/161756" target="_brank" rel="noopener noreferrer">料理きろくにおける料理/非料理判別モデルの詳細 - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2017/11/08/132538" target="_brank" rel="noopener noreferrer">料理画像判定のためのバックエンドアーキテクチャ - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2015/09/30/170015" target="_brank" rel="noopener noreferrer">機械学習によるレシピの自動分類、その裏側 - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2017/10/30/080102" target="_brank" rel="noopener noreferrer">Encoder-Decoder でレシピの材料名を正規化する - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2017/11/21/181206" target="_brank" rel="noopener noreferrer">クックパッドのAmazon Echo向けサービスをリリースしました 〜開発で得られた音声操作の知見〜 - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2017/11/22/alexa-skilldesign" target="_brank" rel="noopener noreferrer">対話のデザインプロセス〜Amazon Echoのスキル開発〜 - クックパッド開発者ブログ</a></li>
    <li><a href="https://www.youtube.com/watch?v=Jw9CpQkCvpM&amp;feature=youtu.be" target="_brank" rel="noopener noreferrer">AWS re:Invent 2017: Containerized Machine Learning on AWS (CON309)</a></li>
    <li><a href="https://www.nii.ac.jp/dsc/idr/cookpad/cookpad.html" target="_brank" rel="noopener noreferrer">情報学研究データリポジトリ クックパッドデータセット</a></li>
    <li><a href="https://signate.jp/competitions/31" target="_brank" rel="noopener noreferrer">コンペティション詳細／人工知能技術戦略会議、内閣府、文部科学省 | SIGNATE - Data Science Competition</a></li>
    <li><a href="https://signate.jp/competitions/59" target="_brank" rel="noopener noreferrer">コンペティション詳細／クックパッド株式会社 | SIGNATE - Data Science Competition</a></li>
</ul>


<p>画像が与えられたとき、料理か料理ではないかを見極めるという一見簡単なことだと思えそうなことがやってみるとかなり難しく、「サービスで解くべき問題は、自分たちがイメージしているものと違う」とのこと。</p>

<p>まず、画像分類の問題は、条件が整っている状況下では解くことは可能。適切なラベルが付与されてたり、適切なカテゴリ分けがされていたり。テストデータと学習データの割合、分布がきちんとなっているとき。
→見た目で分類できるものは解くのは可能。だが、例えばケーキの画像がクリスマス用 or 誕生日パーティ用というのを判断させるのは難しい。
例えば、ラーメンを分類する問題で学習データに多数のラーメン画像を学習させて、そこにケーキの画像が来ると、モデルは一番似ていると判断したものに分類させる。</p>

<p><b>「料理きろく」の事例</b></p>

<ul>
    <li><a href="http://techlife.cookpad.com/entry/2017/11/08/132538" target="_brank" rel="noopener noreferrer">料理画像判定のためのバックエンドアーキテクチャ - クックパッド開発者ブログ</a></li>
    <li><a href="http://techlife.cookpad.com/entry/2017/09/14/161756" target="_brank" rel="noopener noreferrer">料理きろくにおける料理/非料理判別モデルの詳細 - クックパッド開発者ブログ</a></li>
    <li><a href="https://speakerdeck.com/ayemos/real-world-machine-learning" target="_brank" rel="noopener noreferrer">Real World Machine Learning</a></li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>の観点から重要な点は、まずは出してみる。運用してみることで得られる知見がある。
単純な2値分類ではなく、間違いやすいものを特別にハンドリングしてその後に2値分類するとか。</p>

<p>論文も出されているらしい。</p>

<ul>
    <li><a href="https://arxiv.org/abs/1802.01267" target="_brank" rel="noopener noreferrer">[1802.01267] ClassSim: Similarity between Classes Defined by Misclassification Ratios of Trained Classifiers</a></li>
</ul>


<h4>基調講演: Beyond the Boundaries / 成田 一生 様 / 17:10 - 17:30</h4>


<ul>
    <li>資料: <a href="https://speakerdeck.com/mirakui/beyond-the-boundarieso" target="_blank" rel="noopener noreferrer">Beyond the Boundaries // Speaker Deck</a>
</li>
    <li>動画: <a href="https://www.youtube.com/watch?v=WNYLSRSsvDo" target="_blank" rel="noopener noreferrer">Beyond the Boundaries - 成田 一生 (Cookpad TechConf 2018) - YouTube</a>
</li>
</ul>


<p>扱っている技術やエンジニアの行動規範や組織作り、エンジニアが成長するための仕組みなどについてのお話だった。
自社のミッションに沿った組織づくりについてすごく試行錯誤して実践されている印象。見習いたい。</p>

<p>以下はメモ。</p>

<p>技術責任者としては「テク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CE%A5%ED">ノロ</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B8%A1%BC">ジー</a>で料理の課題を解決していきたい」という思いを持って、いろいろ取り組まれているんだと感じた。</p>

<p>プロダクトを作ってユーザの課題を解決するために「技術を正しく理解して普通に使う」</p>

<p><b><u>2018年の技術スタック</u></b></p>

<ul>
    <li>サーバサイド: <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Golang">Golang</a>, Rust</li>
    <li>ネイティブアプリ(<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A1%BC%A5%C8%A5%D5%A5%A9%A5%F3">スマートフォン</a>): swift, kotlin</li>
→kotlinの利用はGoolgeが公式サポートする旨を聞いて即意思決定
    <li>ネイティブアプリ(プロトタイプ向け): React Native</li>
→プロトタイプを重要視しているのでそれらを素早く開発できるようにするため
    <li>serverless: Firebase</li>
    <li>サーバサイド基盤: Docker(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a> ECS + Hako)</li>
→サーバサイドアプリはECSでのDockerを使い、Hakoによるデプロイで稼働させているらしい</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>の上で動いている<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>というサービスの開発を持続可能にするのは企業の責任として考え、フルタイムのコミッタ、笹田様、遠藤様を自社に迎えてコミュニティにも還元できるように心がけているそう。</p>

<ul>
    <li><a href="https://info.cookpad.com/pr/news/press_2017_0918" target="_brank" rel="noopener noreferrer">クックパッド、フルタイムRubyコミッターとして遠藤侑介氏を採用　次世代バージョンの中心的機能となるRubyの堅牢性向上に貢献 | クックパッド株式会社</a></li>
</ul>


<p><b><u>エンジニア企業文化</u></b></p>

<p>行動規範として「Beyond the Boundaries」を掲げているとのこと。
これは、知らず知らずのうちに「自分にはそれはできない」「自分の責任ではない」と自ら引いてしまっている境界(Boundaries)を認識し、そして自分の仕事の境界を認識して上でそれを超えていこう、ということらしい。
自分が何をすべきか、役割を広くとらえて動くことで、組織全体としてうまく動くようにしていこうとしている。</p>

<p>新しい人が入ってくきて組織が大きくなると、役割が特化した働き方ができる、細分化していく。自分がやらなくても組織は回っていくようになる。
ただ、それに逆行してもっと流動的に役割を飛び越えて働くようにしたい、それが若者の育成に重要と考えている、とのこと。</p>

<p>今回のカンファレンスの発表者も新卒～2年目、3年目が多く、若くて優秀な人が多く入ってきて成長できる環境を育成できていると感じているそう。</p>

<p>これは昔から同じようなことを考えていて、例えば職種ごとに部門が分かれたりしていると、各部署間でのミッションのズレが起こり「これはうちの部署の責任ではないからよい」とかになってプロダクトとしてあるべき形を見失う。
ただ、明確な線引き、責任分解点があったほうがやりやすいというのはあるので、そういうのは組織の文化とかとのバランスなのかな、と思ったりしている。</p>

<p><b><u>テッ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%EA%A1%BC%A5%C9">クリード</a>制度</u></b></p>

<p>各部署にミニCTO(技術選定、コードレビュー、メンタリング、エンジニア評価)を配置。その部署の技術責任者、メンバーの成長に責任を持つ。
CTOはテッ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%EA%A1%BC%A5%C9">クリード</a>(ミニCTO)と面談、コミュニケーションをして、組織や技術をどうしていくのが良いか等を話し合う。
これをやって状況がかなり改善したらしい。</p>

<p><b><u>全社<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%AB%A5%BD%A5%F3">ハッカソン</a></u></b></p>

<p>役割が細分化していくと、自分が触ったことのない技術が増えていく。さらに自動化が進むと、触る必要もなくなってくる。
昔はいろいろ触れる機会があったが減ってきた。それを補うために、全社<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%AB%A5%BD%A5%F3">ハッカソン</a>を実施。</p>

<p>専門外の難しいことをみんなでやる。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%D7%A5%EA%A5%BF">インタプリタ</a>開発や<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%A1%B3%A3%B3%D8%BD%AC">機械学習</a>領域。</p>

<p><b><u>料理を楽しむ人がもっとクリエイティブになれる場所へ</u></b></p>

<p>1つの取り組みとして<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a> Studio。料理動画を投稿できるようにしたいが料理動画を撮るのは難しいがそれを解決するための場所らしい。レシピ投稿者ならだれでも利用できるとのこと。</p>

<ul>
    <li><a href="https://cookpad-studio.com/" target="_brank" rel="noopener noreferrer">誰でも簡単に料理動画が撮影できるスタジオ cookpad studio</a></li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>は「レシピ検索」中心のサービスでそれによって解決できる問題は「今日何を作ろう？」というもの。ただ、もっと広く考えているのは「毎日の料理を楽しみにしたい」ということ。
対して、料理する人は減ってきているらしい。</p>

<p>未解決の食の課題はたくさんある。
そういうことについて分析したそうで、それが以下の食と料理にまつわる社会課題マップとのこと。</p>

<ul>
    <li><a href="http://cookpad.01booster.com/images/map.pdf" target="_brank" rel="noopener noreferrer">http://cookpad.01booster.com/images/map.pdf</a></li>
</ul>


<p>現在、プロダクトとして立ち向かえている領域は少ししかないが、これに立ち向かっていきたいとのこと。</p>

<h4>LT</h4>


<p>あまりよく聞こえなかったのでとりあえず見つけた資料のリンクのみ張っておく。</p>

<ul>
    <li><a href="https://speakerdeck.com/osa/introduce-oneshot-task-generator" target="_brank" rel="noopener noreferrer">oneshot task をいい感じにする / Introduce oneshot task generator // Speaker Deck</a></li>
    <li><a href="https://speakerdeck.com/kenju/guang-gao-pei-xin-sabatoguang-gao-pei-xin-bi-lu-zui-shi-hua-wen-ti" target="_brank" rel="noopener noreferrer">広告配信サーバーと広告配信比率最適化問題 // Speaker Deck</a></li>
    <li><a href="https://speakerdeck.com/mizutani/korega-cloud-native-na-sekiyuriteirogufen-xi-da-jia" target="_brank" rel="noopener noreferrer">これが Cloud Native な セキュリティログ分析だ (仮) // Speaker Deck</a></li>
</ul>


<h3>まとめ</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a> TechConf 2018 に参加してきたのでその振り返りとしてのまとめを書いた。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookpad">Cookpad</a>の技術的な取り組みに関して知ることができ、楽しい1日を過ごせたイベントだった。関係者の皆様、ありがとうございました。</p>
</body>
