---
layout: post
Categories:  ["tech"]
Description:  " はじめに  Linux系のOSで誤って~、-、?などのような記号で始まるファイルが出来てしまった場合に、bash等のシェルから削除する方法を調べてみました。    削除方法  inodeの番号を利用した削除方法  やり方としては、削除対象"
Tags: ["システム運用", "Linux"]
date: "2014-10-13T17:24:00+09:00"
title: "Linuxで文字化けしたり記号で始まるファイルやディレクトリをシェルから削除する"
author: "dshimizu"
archive: ["2014"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>系のOSで誤って<code>~</code>、<code>-</code>、<code>?</code>などのような記号で始まるファイルが出来てしまった場合に、<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>等のシェルから削除する方法を調べてみました。 </p>
<a name="more"></a> <h4>削除方法</h4>
<h5>inodeの番号を利用した削除方法</h5>
<p>やり方としては、削除対象ファイルの<code>inode</code>番号を調べ、そのファイルを<code>find</code>コマンドで<code>inode</code>番号(ファイルの作成日時、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%DF%A5%C3%A5%B7%A5%E7%A5%F3">パーミッション</a>、サイズ等々のメタ情報の管理番号)で抽出して<code>xargs</code>、または<code>exec</code>に渡して<code>rm</code>で削除するというものになります。<br> ここでは、以下の<code>~</code>というファイルを削除します。 </p>
<pre class="terminal">  % ls | head ~ Applications Desktop Documents Downloads Dropbox Fiddler2 Library Movies Music  </pre> <p><code>ls</code>コマンドの<code>-i</code>オプションでファイルの<code>inode</code>番号を表示できます。 </p>
<pre class="file">         -i, --inode               各ファイルの i ノード番号を表示する (man ls参照)  </pre> <p>これで文字化けしたファイルの<code>inode</code>番号を調べます。左の数値が<code>inode</code>番号になります。 </p>
<pre class="terminal">  % ls -i | head 31290093 ~ 30980372 Applications   379474 Desktop   379270 Documents   379367 Downloads   390474 Dropbox 11789816 Fiddler2   379464 Library   379514 Movies   379516 Music  </pre> <p><code>find</code>コマンドの<code>-inum</code>オプションと<code>inode</code>番号を指定することで該当ファイルを抽出できます。 </p>
<pre class="terminal">  % find . -inum 31290093 ./~  </pre> <p><code>inode</code>番号で抽出する対象に間違いがないことが確認できたら<code>xargs rm</code>の引数に渡して削除を実行します。 </p>
<pre class="terminal">  % find . -inum 32735580 | xargs rm  </pre> <h5>その他ある特定の文字で始まるファイルの削除方法</h5>
<h6>-で始まるファイルの削除方法</h6>
<p><code>-</code>で始まるファイルは<code>rm</code>に<code>--</code>オプションを付与して、その後に<code>-</code>で始まるファイルを指定することで削除できます。 </p>
<pre class="file">  NOTE      The rm command uses getopt(3) to parse its arguments, which allows it to accept the `--' option which will cause it to stop processing flag options at that point.      This will allow the removal of file names that begin with a dash (`-').  For example:            rm -- -filename      The same behavior can be obtained by using an absolute or relative path reference.  For example:            rm /home/user/-filename            rm ./-filename (man rm参照)  </pre> <p>以下の<code>-</code>で始まるファイルを削除します。 </p>
<pre class="terminal">  % ls | head - Applications Desktop Documents Downloads Dropbox Fiddler2 Library Movies Music  </pre> <p>マニュアル通り<code>rm</code>コマンドの<code>--</code>の後に<code>-</code>で始まるファイルを削除します。 </p>
<pre class="terminal">  % rm -rf -- -  </pre> <h4>おわりに</h4>
<p>以上、単なるメモでした。コマンドオプションの使いかたをもっときちんと覚えるだけでやれること増えるなーと思いました。 </p> <h4>参考</h4>
<ul>  <li><a href="http://centos.bungu-do.jp/archives/000303.html">Linux 文字化けで消せないファイル・ディレクトリを消す | CentOSサーバ構築術 文具堂</a></li>  <li><a href="http://www.itmedia.co.jp/help/tips/linux/l0242.html">ITmedia エンタープライズ : Linux Tips「先頭にハイフンが付くファイルを削除できない</a></li>
</ul>
</body>

<!-- more -->


