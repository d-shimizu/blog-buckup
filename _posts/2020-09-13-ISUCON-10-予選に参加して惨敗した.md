---
layout: post
Categories:  ["tech"]
Description:  " ISUCON 10 予選に参加して惨敗した。今回も自分はインフラ担当だった。 "
Tags: ["ISUCON", "tech"]
date: "2020-09-13T23:16:00+09:00"
title: "ISUCON 10 予選に参加して惨敗した"
author: "dshimizu"
archive: ["2020"]
draft: "true"
---

<body>
<p>ISUCON 10 予選に参加して惨敗した。今回も自分はインフラ担当だった。</p>

<iframe class="embed-card embed-webcard" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="ISUCON9 まとめ : ISUCON公式Blog" src="https://hatenablog-parts.com/embed?url=http://isucon.net/archives/54704557.html" frameborder="0" scrolling="no"></iframe>

</body>

<!-- more -->

<body>
<h3>振り返り</h3>


<p>今回はコロナ禍ということもあって、完全リモートで作業した。一応、事前に軽いリハーサルをやったのもあって特に問題はなかったと思うが、個人的には対面の方が良かったりする。</p>

<h4>課題アプリケーションとシステム環境</h4>


<p>課題となるアプリケーションは ISUUMO という「イスに合う物件を検索するサイト」というものだった。名前から推測できる通り、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%AF%A5%EB%A1%BC%A5%C8">リクルート</a>様が問題を作成されたそう。
インフラ環境は、今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A5%A4%A5%D0%A1%BC%A5%A8%A1%BC%A5%B8%A5%A7%A5%F3%A5%C8">サイバーエージェント</a>様よりお貸しいただけたとのこと。</p>

<ul>
    <li><a target="_brank" rel="noopener noreferrer" href="https://type.jp/et/feature/13831/">寿命が縮まる、人生が変わる…８時間耐久でインフラ技術競い合うISUCONの魅力とは？過去優勝者・主催者に聞く - エンジニアtype | 転職type</a></li>
</ul>


<p>参加者全員で共有利用する踏み台サーバを経由して、チームごとにOS環境3台にアクセスして利用する、という形だった。</p>

<p>また、今回は New Relic 様より、 ISUCON 10 用の特別無料ライセンスもご提供いただき、モニタリング環境も整っていた。</p>

<ul>
    <li><a target="_brank" rel="noopener noreferrer" href="https://blog.newrelic.co.jp/developers/how-to-utilize-isucon-special-license/">ISUCON10参加者向けNew Relic特別無料ライセンスの利用手順について - New Relic公式ブログ</a></li>
</ul>


<h4>序盤〜中盤</h4>


<p>スタートが少々遅れ 12 時スタート。まずは環境作り。サーバにログインする環境を整備したり、言語実装を切り替えたり、アプリの動作を確認したり、レギュレーション読んだり。サーバへのログインや、アプリケーションの動作確認には <a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a> のポート<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A9%A5%EF">フォワ</a>ードをする必要があったので、この辺で少し時間を食った。
3台あるサーバの役割を分担して、AP * 2 台、 DB * 1 台にしたりなどをやった。</p>

<h4>中盤〜終盤</h4>


<p>アプリケーションもDBも CPU が飽和状態にある感じだった。ボットのアクセスを弾くことでちょっと得点が伸びた。<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のエンドポイントの振り分けを Nginx で変えたりしていたがあんまり効果は出ず、スコアは 1,000 前後をフラフラする感じだった。
あんまり有効打を打てず、最後に OS 再起動を試してそのままフィニッシュ。</p>

<h3>まとめ</h3>


<p>予選突破ラインのスコアを出すためにはブレイクスルーするポイントを見つけて、それが解決する必要があるが、まだまだ実力不足だった。また、インフラだけでは対応できることが限られるので、アプリケーションレイヤにももっと対応できるように、もっと修行したい。</p>

<p>運営の皆様、今年も楽しい問題をありがとうございました。予選突破された皆さんは本選でも頑張ってください。</p>
</body>
