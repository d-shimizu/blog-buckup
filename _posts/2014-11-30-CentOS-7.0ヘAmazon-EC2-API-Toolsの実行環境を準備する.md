---
layout: post
Categories:  ["tech"]
Description:  " はじめに  最近AWSを使っているので、CentOSにAmazon EC2 API Toolsの実行環境を準備した際のメモです。    Amazon EC2 API Toolsとは  Amazon EC2 API Toolsは、Amazo"
Tags: ["AWS", "CentOS 7"]
date: "2014-11-30T23:55:00+09:00"
title: "CentOS 7.0ヘAmazon EC2 API Toolsの実行環境を準備する"
author: "dshimizu"
archive: ["2014"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p>最近<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>を使っているので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a>に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの実行環境を準備した際のメモです。 </p> <a name="more"></a><h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsとは</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a>サービスに対するクライアント側のインターフェースとして機能し、EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の作成や起動、セキュリティグループの操作などを実行するために利用します。 </p>
<ul>  <li><a href="https://aws.amazon.com/developertools/351">Amazon EC2 API Tools : Developer Tools : Amazon Web Services </a></li>
</ul> <h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの導入</h4>
<h5>事前準備</h5>
<p>事前に<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> アクセスキー/シークレットキーを取得しておきます。また<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>が必要なので、事前にインストールしておく必要があります。本環境では2014/11/30時点最新版<a class="keyword" href="http://d.hatena.ne.jp/keyword/JDK">JDK</a>のバージョン1.8.0_25を<a class="keyword" href="http://d.hatena.ne.jp/keyword/Oracle">Oracle</a>社のサイトから取得しています。 </p> <h5>環境</h5>
<p>導入環境は以下です。<br></p>
<table>  <tr>    <td bgcolor="#cccccc">プラットフォーム</td>    <td>さくらの<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPS">VPS</a> (<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSD">SSD</a> 1G)</td>  </tr>  <tr>    <td bgcolor="#cccccc">OS</td>    <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a> 7.0</td>  </tr>  <tr>    <td bgcolor="#cccccc">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>バージョン</td>    <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/JDK">JDK</a> 1.8.0_25</td>  </tr>
<tr>  </tr>
<tr>    <td bgcolor="#cccccc">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>設置先<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ($<a class="keyword" href="http://d.hatena.ne.jp/keyword/JAVA">JAVA</a>_HOME)td&gt;    </td>
<td>~/local/jdk1.8.0_25</td>  </tr>
<tr>    <td bgcolor="#cccccc">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsバージョン</td>    <td>1.7.2.3</td>  </tr>
<tr>    </tr>
<tr>    <td bgcolor="#cccccc">
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Tools設置先<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ($EC2_HOME)</td>    <td>~/local/ec2-<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>-tools-1.7.2.3</td>  </tr>
<tr>  </tr>
</table> <h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの取得と展開</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> ToolsはZIPファイルとして<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20S3">Amazon S3</a>に設置されているようですので、ファイルをダウンロードして適当な場所に展開します。 </p>
<pre class="terminal">  % wget -P ~/local http://s3.amazonaws.com/ec2-downloads/ec2-api-tools.zip --2014-12-06 21:02:39--  http://s3.amazonaws.com/ec2-downloads/ec2-api-tools.zip s3.amazonaws.com (s3.amazonaws.com) をDNSに問いあわせています... 54.231.244.4 s3.amazonaws.com (s3.amazonaws.com)|54.231.244.4|:80 に接続しています... 接続しました。 HTTP による接続要求を送信しました、応答を待っています... 200 OK 長さ: 16518332 (16M) [binary/octet-stream] `/tmp/ec2-api-tools.zip' に保存中  100%[=======================================================&gt;] 16,518,332  4.49MB/s 時間 4.2s  2014-12-06 21:02:43 (3.72 MB/s) - `/home/hogehoge/local/ec2-api-tools.zip' へ保存完了 [16518332/16518332]  </pre> <pre class="terminal">  % unzip ~/local/ec2-api-tools.zip -d ~/local Archive:  /home/hogehoge/local/ec2-api-tools.zip    creating: /home/hogehoge/ec2-api-tools-1.7.2.3/   inflating: /home/hogehoge/ec2-api-tools-1.7.2.3/THIRDPARTYLICENSE.TXT    creating: /home/hogehoge/ec2-api-tools-1.7.2.3/bin/ ・・・  </pre> <h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>の設定</h5>
<p>必要な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>を設定します。 </p>
<h6>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JDK">JDK</a>)の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/JDK">JDK</a>設置先(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JAVA">JAVA</a>_HOME)を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。 </p>
<pre class="terminal">  % export JAVA_HOME=~/local/jdk1.8.0_25  </pre> <h6>EC2 <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Tools設置先を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。 </p>
<pre class="terminal">  % export EC2_HOME=~/local/ec2-api-tools-1.7.2.3  </pre> <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsのコマンド群へのPATHを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。 </p>
<pre class="terminal">  % export PATH=$PATH:$EC2_HOME/bin  </pre> <h6>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のアクセスキー/シークレットキーの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のアクセスキー/シークレットキーの値を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。 </p>
<pre class="terminal">  % export AWS_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxx % export AWS_SECRET_KEY=xxxxxxxxxxxxxxxxxxxxx  </pre> <h6>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のリージョンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のリージョンを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。 </p>
<pre class="terminal">  % export EC2_URL=https://ec2.ap-northeast-1.amazonaws.com  </pre> <h6>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a>の公開鍵/<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a>の公開鍵/<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>設置先を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>として設定します。EC 2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>へのオペレーションを行わない場合はこの設定は不要です。 </p>
<pre class="terminal">  % export EC2_PRIVATE_KEY=~/.ssh/my-key.pem % export EC2_CERT=~/.ssh/my-crt.pem  </pre> <h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの実行テスト</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsに含まれているコマンドの一つで動作のテストを行います。ここでは作成した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の一覧を取得するための<code>ec2-describe-instances</code>を実行してみます。<br>無事<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の一覧を取得できれば完了です。 </p>
<pre class="terminal">  % ~/local/ec2-api-tools-1.7.2.3/bin/ec2-describe-instances   </pre> <h4>おわりに</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Toolsの実行環境が準備できました。 </p> <h4>参考</h4>
<ul>  <li><a href="http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html">Setting Up the Amazon EC2 Command Line Interface Tools on Linux/Unix and Mac OS X - Amazon Elastic Compute Cloud</a></li>
</ul>
</body>

<!-- more -->


