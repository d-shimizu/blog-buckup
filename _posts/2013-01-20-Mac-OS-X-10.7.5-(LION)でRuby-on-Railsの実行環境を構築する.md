---
layout: post
Categories:  ["tech"]
Description:  " はじめに  前回、Mac OS X 10.7.5 (LION)へRubyをインストールしました。 今回はそこにRuby on Rails環境を構築して、簡易Webアプリ作成し、動作させてみました。   環境  インストール環境  インスト"
Tags: ["Ruby", "Rails", "MySQL", "環境構築", "Mac"]
date: "2013-01-20T03:10:00+09:00"
title: "Mac OS X 10.7.5 (LION)でRuby on Railsの実行環境を構築する"
author: "dshimizu"
archive: ["2013"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p><a href="http://kanjuku-tomato.blogspot.jp/2013/01/mac-os-x-1075lion-ruby-193.html">前回</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a> 10.7.5 (LION)へ<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>をインストールしました。<br>今回はそこに<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a>環境を構築して、簡易Webアプリ作成し、動作させてみました。 </p>
<a name="more"></a><h4>環境</h4>
<h5>インストール環境</h5>
<p>インストール環境は以下です。 </p>
<table>  <tr>    <td bgcolor="#cccccc">プラットフォーム</td>    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Macbook%20Air">Macbook Air</a></td>  </tr> <tr>    <td bgcolor="#cccccc">OS</td>    <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a> 10.7.5</td>  </tr>
</table>
<h5>利用するソフトウェア</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a>を利用するためにはWebサーバ、データベースが必要となります。<br>今回はWebサーバに<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a>に標準で付属されている<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>、データベースには<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>を利用します。 </p>
<table> <tr bgcolor="#cccccc">  <th><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DF%A5%C9%A5%EB%A5%A6%A5%A7%A5%A2">ミドルウェア</a></th>  <th>バージョン</th>  <th>備考</th> </tr>
<tr>  <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a></td>  <td>2.2.22</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/OS%20X">OS X</a> 付属Webサーバ</td> </tr>
<tr>  <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a></td>  <td>5.5.29</td>  <td>DBサーバ</td> </tr>
<tr>  <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a></td>  <td>1.9.3-p327</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>(rbenv管理)</td> </tr>
<tr>  <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/RubyGems">RubyGems</a></td>  <td>1.8.23</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>のパッケージ/ライブラリ管理ツール</td> </tr> <tr>  <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a></td>  <td>3.2.11</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>
</td> </tr>
</table>
<br><p><strong><u>※<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>用Webサーバ</u></strong><br><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>に利用されるWebサーバとしては主に以下があります。<br>細かい<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a>については記載していませんが、最近ではPassengerか<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicorn">Unicorn</a>の利用が主流なようです。 </p>
<ul>  <li><a class="keyword" href="http://d.hatena.ne.jp/keyword/WEBrick">WEBrick</a></li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>に標準で付属されているHTTPサーバ。低速ですがテスト等で利用するのであれば十分かもしれません。   <li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mongrel">Mongrel</a></li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>とCライブラリで書かれた<a class="keyword" href="http://d.hatena.ne.jp/keyword/WEBrick">WEBrick</a>より高速に動作するHTTPサーバ。かつては多く利用されていたようです。   <li>Thin</li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mongrel">Mongrel</a>のコードを元に開発された高速で軽量なHTTPサーバ。<a class="keyword" href="http://d.hatena.ne.jp/keyword/WEBRick">WEBRick</a>の代替として用いられることが多いようです。   <li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicorn">Unicorn</a></li>主に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>で開発されている高速なHTTPサーバ。カスタマイズ性や拡張性が高い。   <li>Passenger</li>高速、高機能なHTTPサーバ。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>/Nginxの拡張モジュールとして利用される。 </ul>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mongrel">Mongrel</a>やthin、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicorn">Unicorn</a>では、動作を高速にさせるためにリバースプロキシを利用し、リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トの内、静的なファイルへのリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トはリバースプロキシで処理させ、それ以外のリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トについては<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mongrel">Mongrel</a>やthin、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicorn">Unicorn</a>で処理させる構成となるのが一般的です。<br>対して、Passengerでは、外部からのリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トは全て<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>で処理されます。設定ファイルや起動/停止の制御、プロセス監視などを<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のみで管理できる点がメリットであると思います。 </p>
<h4>手順</h4>
<p>実施した内容は以下になります。 </p>
<ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の環境構築</li>
<ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のインストール</li>
</ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の環境構築と設定</li>
<ol>  <li>Passion Passengerのインストール</li>  <li>Passengerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>モジュールのインストール</li>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の設定</li>
</ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>環境構築</li>
<ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>のインストール</li>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の初期設定</li>
</ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションの作成</li>
<ol>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションの作成</li>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の設定</li>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーション用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>テーブルの作成</li>
</ol>  <li>動作確認</li>
</ol>
<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の環境構築</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/RubyGems">RubyGems</a>(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>のパッケージ管理システム)からインストールを行います。<br><a class="keyword" href="http://d.hatena.ne.jp/keyword/RubyGems">RubyGems</a>のツールは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%201.9">Ruby 1.9</a>.1以降では標準で含まれているので、特にインストールは不要です。 </p>
<h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>のインストール</h5>
<p>まず最初に<a class="keyword" href="http://d.hatena.ne.jp/keyword/RubyGems">RubyGems</a>のライブラリ郡を最新化します。 </p>
<pre class="terminal">  % gem update  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>をインストールします。 </p>
<pre class="terminal">  % gem install rails  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>を再読み込みします。 </p>
<pre class="terminal">  % source ~/.zshrc  
</pre>
<p>以下の通り<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>がインストールされていることが確認できます。 </p>
<pre class="terminal">  % which rails /Users/xxxxx(ユーザ名)/.rbenv/shims/rails % rails -v Rails 3.2.11  
</pre>
<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の環境構築と設定</h4>
<h5>Passion Passengerのインストール</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/RubyGems">RubyGems</a>からPassion Passengerをインストールします。 </p>
<pre class="terminal">  % gem install passenger  
</pre>
<h5>Passengerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>モジュールのインストール</h5>
<p>Passengerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>モジュールをインストールします。 </p>
<pre class="terminal">  % passenger-install-apache2-module  
</pre>
<p>※不足しているモジュールやパッケージがあればエラーとなりますが、出力されるエラーメッセージ内に不足パッケージ類のリストとそのインストール手順が表示されますので、それに従ってインストールします。 <br>※インストールが正常に行われると、最後に以下のようなPassengerを読み込むために追加すべき<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の設定内容が表示され、さらに[Enter]キーを押下すると、virtualhostの設定のサンプルが表示されますので、これらのメッセージはメモしておくと良いです。 </p>
<pre class="terminal">  ... -------------------------------------------- The Apache 2 module was successfully installed.  Please edit your Apache configuration file, and add these lines:     LoadModule passenger_module /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so    PassengerRoot /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/passenger-3.0.19    PassengerRuby /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/bin/ruby  After you restart Apache, you are ready to deploy any number of Ruby on Rails applications on Apache, without any further Ruby on Rails-specific configuration!  Press ENTER to continue.   
</pre>
<pre class="terminal">  -------------------------------------------- Deploying a Ruby on Rails application: an example  Suppose you have a Rails application in /somewhere. Add a virtual host to your Apache configuration file and set its DocumentRoot to /somewhere/public:            ServerName www.yourhost.com       # !!! Be sure to point DocumentRoot to 'public'!       DocumentRoot /somewhere/public                     # This relaxes Apache security settings.          AllowOverride all          # MultiViews must be turned off.          Options -MultiViews             And that's it! You may also want to check the Users Guide for security and optimization tips, troubleshooting and other useful information:    /Users/shimizu/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/doc/Users guide Apache.html  Enjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-) https://www.phusionpassenger.com  Phusion Passenger is a trademark of Hongli Lai &amp; Ninh Bui.  </pre> <h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のバーチャルホストの設定</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のバーチャルホストのconfファイルを新規に作成し、設定を行います。ここでは自分のホーム<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ配下に/wwwを作成し、それをドキュメントルートとしました。<br>デフォルトで準備されている他のファイルをあまり編集したくなかったので、ここでは/etc/apache2/users配下へtest.confという名称で設定ファイルを新規に作成しています。<br>※バーチャルホストの設定ファイルは/etc/apache2/extra配下にありますので、それを利用するなどでも構いません。 </p>
<pre class="terminal">  % mkdir /Users/xxxxx(ユーザ名)/www  
</pre>
<pre class="terminal">  % cd /etc/apache2/users % sudo vim test.conf ### 設定例 NameVirtualHost *:80    ServerName localhost   DocumentRoot /Users/xxxxx(ユーザ名)/www       Options Indexes MultiViews     AllowOverride None     Order allow,deny     Allow from all   
</pre>
<p>続いてPassenger用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>設定ファイルを作成します。ここではpassenger.confという名称の設定ファイルを作成しました。<br>Passengerをインストールした際に出力されたメッセージを元に設定を行います。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>を連携させるために"RailsEnv"、"RailsBaseURI"ディレクティブの指定も行う必要があります。 </p>
<pre class="terminal">  % cd /etc/apache2/users % sudo vim passenger.conf ### 設定例 LoadModule passenger_module /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/ext/apache2/mod_passenger.so PassengerRoot /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/passenger-3.0.19 PassengerRuby /Users/xxxxx(ユーザ名)/.rbenv/versions/1.9.3-p362/bin/ruby  RailsEnv development RailsBaseURI /testapp/public            # This relaxes Apache security settings.       AllowOverride all       # MultiViews must be turned off.       Options -MultiViews      
</pre>
<p>全ての設定が完了したら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>を再起動します。 </p>
<pre class="terminal">  % sudo apachectl restart  
</pre>
<p>以上で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の設定は完了です。 </p>
<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>環境構築</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の環境を構築します。 </p>
<h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>のインストール</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>のインストール方法はいろいろありますが、ここではhomebrewから行います。 </p>
<pre class="terminal">  % brew install mysql  
</pre>
<p>インストール時に以下の通り初期セットアップの手順が出力されますので、参考にメモしておきます。 </p>
<pre class="terminal">  Set up databases to run AS YOUR USER ACCOUNT with:     unset TMPDIR     mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp  To set up base tables in another folder, or use a different user to run mysqld, view the help for mysqld_install_db:     mysql_install_db --help  and view the MySQL documentation:   * http://dev.mysql.com/doc/refman/5.5/en/mysql-install-db.html   * http://dev.mysql.com/doc/refman/5.5/en/default-privileges.html  To run as, for instance, user "mysql", you may need to `sudo`:     sudo mysql_install_db ...options...  A "/etc/my.cnf" from another install may interfere with a Homebrew-built server starting up correctly.  To connect:     mysql -uroot  To have launchd start mysql at login:     ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents Then to load mysql now:     launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist Or, if you don't want/need launchctl, you can just run:     mysql.server start ?  /usr/local/Cellar/mysql/5.5.29: 6389 files, 210M  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>を再度読み込み、PATHを通します。 </p>
<pre class="terminal">  % source .zshrc  
</pre>
<p>以下の通りインストールされていることが確認できます。 </p>
<pre class="terminal">  % mysql --version mysql  Ver 14.14 Distrib 5.5.29, for osx10.7 (i386) using readline 5.1  
</pre>
<h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の初期設定</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>データを初期化し、システムテーブル(<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>権限テーブル)を作成します。<br>システムテーブルのデータはデータ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ内(datadir)に格納され、mysqldは起動後にデータ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ内のデータにアクセスするため、mysqldを実行するのと同じアカウントで<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>_install_dbを実行する必要があります。<br>データ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リの配置先などに特に問題がなければ、先の<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>インストール時に表示された内容でそのまま処理を実行して問題ありません。 </p>
<pre class="terminal">  $ unset TMPDIR $ mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp  when specifying MySQL privileges ! Installing MySQL system tables... OK Filling help tables... OK  
</pre>
<p>※以下のようにパスワードの設定手順などが表示されますので必要であればメモしておきます。 </p>
<pre class="terminal">  To start mysqld at boot time you have to copy support-files/mysql.server to the right place for your system  PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER ! To do so, start the server, then issue the following commands:  /usr/local/opt/mysql/bin/mysqladmin -u root password 'new-password' /usr/local/opt/mysql/bin/mysqladmin -u root -h MacBook-Air password 'new-password'  Alternatively you can run: /usr/local/opt/mysql/bin/mysql_secure_installation  which will also give you the option of removing the test databases and anonymous user created by default.  This is strongly recommended for production servers.  See the manual for more instructions.  You can start the MySQL daemon with: cd /usr/local/opt/mysql ; /usr/local/opt/mysql/bin/mysqld_safe &amp;  You can test the MySQL daemon with mysql-test-run.pl cd /usr/local/opt/mysql/mysql-test ; perl mysql-test-run.pl  Please report any problems with the /usr/local/opt/mysql/scripts/mysqlbug script!  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>サーバを起動させます。 </p>
<pre class="terminal">  % mysql.server start                  Starting MySQL .. SUCCESS!   
</pre>
<p>rootのパスワードを設定します。 </p>
<pre class="terminal">  shimizu@MBA /Users/shimizu% mysqladmin -u root password         New password:  Confirm new password:   
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>サーバにログインします。 </p>
<pre class="terminal">  % mysql -u root -p Enter password:  Welcome to the MySQL monitor.  Commands end with ; or \g. Your MySQL connection id is 2 Server version: 5.5.29 Source distribution  Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.  Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners.  Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.  mysql&gt;   
</pre>
<p>細 かいパラメータの調整などもありますが、ひとまずこれで<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>を動作させることができます。 </p>
<h4>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションの作成</h4>
<p>テスト用<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションを作成します。 </p>
<h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションの作成</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>用に設定した<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のドキュメントルート(/Users/xxxxx(ユーザ名)/www/)へ移動し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションを作成します。アプリケーションの名前はtestappとし、-dオプション(データベース指定用のオプション)に<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>を指定します。<br>testapp<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リが作成され，その中に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>用のサブ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リやファイルが生成されます。 </p>
<pre class="terminal">  % cd /Users/xxxxx(ユーザ名)/www % rails new testapp -d mysql  
</pre>
<h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の設定</h5>
<p>データベースの設定をするには，先ほど作成されたschedule/config<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ内のdatabase.<a class="keyword" href="http://d.hatena.ne.jp/keyword/xml">xml</a>ファイルに<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a>から接続するための<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>のデータベース名、ユーザ/パスワードを記載します。<br>ここでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a>というユーザを指定しています。 </p>
<pre class="terminal">  % cd /Users/xxxxx(ユーザ名)/www/testapp/config % vim database.yml ### 修正 development:   adapter: mysql2   encoding: utf8   reconnect: false   database: testapp_development    pool: 5   username: rails      password: rails      socket: /tmp/mysql.sock  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>アプリケーションで利用するデータベースを作成します。 database.<a class="keyword" href="http://d.hatena.ne.jp/keyword/xml">xml</a>に定義されているデータベース名(ここではtestapp_development)と同名のデータベースを作成します。 </p>
<pre class="terminal">  % mysql -u root -p  Enter password:  Welcome to the MySQL monitor.  Commands end with ; or \g. Your MySQL connection id is 39 Server version: 5.5.29 Source distribution  Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.  Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners.  Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.  mysql&gt;  mysql&gt; create database testapp_development default character set utf8; Query OK, 1 row affected (0.00 sec) mysql&gt; show databases; +---------------------+ | Database            | +---------------------+ | information_schema  | | mysql               | | performance_schema  | | test                | | testapp_development | +---------------------+ 5 rows in set (0.01 sec)  
</pre>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>から接続用のユーザを作成します。 ここでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/rails">rails</a>という名前のユーザを作成します。<br>※接続ユーザは特になんでも構いませんが、database.<a class="keyword" href="http://d.hatena.ne.jp/keyword/xml">xml</a>で設定したものと同様にしておきます。 </p>
<pre class="terminal">  mysql&gt; grant all on test_development.* to 'rails'@'localhost'; Query OK, 0 rows affected (0.01 sec) mysql&gt; set password for 'rails'@'localhost' = password('rails'); Query OK, 0 rows affected (0.00 sec)  
</pre>
<p>ここまでで、以下URLにアクセスすると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>の初期ページが表示されます。 <br><a href="http://localhost/testapp/public/">http://localhost/testapp/public/</a> </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-bZ77xwL_kxs/UQ5lY-07_iI/AAAAAAAAARI/cUEVkwhWG-M/s1600/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588%2B2013-02-03%2B19.28.23.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" src="http://3.bp.blogspot.com/-bZ77xwL_kxs/UQ5lY-07_iI/AAAAAAAAARI/cUEVkwhWG-M/s600/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588%2B2013-02-03%2B19.28.23.png"></a></div>
<p>"About your application’s environment"を押下し、以下のような表示がされればデータベースへの接続などに問題がないことになります。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-pmluMbk39fE/UQ5nIDUkqGI/AAAAAAAAARc/Wx7E7-7ah7E/s1600/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588%2B2013-02-03%2B22.31.43.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" src="http://1.bp.blogspot.com/-pmluMbk39fE/UQ5nIDUkqGI/AAAAAAAAARc/Wx7E7-7ah7E/s600/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588%2B2013-02-03%2B22.31.43.png"></a></div> <h4>おわりに</h4>
<p>以上で、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a> 10.7.5(LION)での<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a>環境を構築できました。<br>とは言え、まだまだわからないことも多いのでこれから勉強していこうと思います。 </p>
</body>

<!-- more -->


