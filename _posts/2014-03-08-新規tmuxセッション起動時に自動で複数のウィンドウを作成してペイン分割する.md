---
layout: post
Categories:  ["tech"]
Description:  " はじめに  tmuxの新規セッション起動時に、毎回必要なウィンドウとペインを作成するのは面倒なときがあります。 そんなときは、あらかじめ必要なウィンドウとペインを作成するファイルを用意しておき、起動時にそのファイルを読み込ませることで自動"
Tags: ["tmux"]
date: "2014-03-08T15:02:00+09:00"
title: "新規tmuxセッション起動時に自動で複数のウィンドウを作成してペイン分割する"
author: "dshimizu"
archive: ["2014"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p>tmuxの新規セッション起動時に、毎回必要なウィンドウとペインを作成するのは面倒なときがあります。<br>そんなときは、あらかじめ必要なウィンドウとペインを作成するファイルを用意しておき、起動時にそのファイルを読み込ませることで自動でウィンドウとペインを作成するようにしておくと便利です。<br>ここではその方法について記載します。<br>なお、ウィンドウやペインについての詳細は記載していません。 </p> <a name="more"></a><h4>ウィンドウとペイン作成ファイルの準備とそのファイルを利用したtmux起動</h4>
<h5>環境</h5>
<p>動作確認環境は以下です。 </p>
<table>
<tr>  <td bgcolor="#cccccc">OS</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a> 6.5 <a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64 (kernel 2.6.32-431.3.1.el6.<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64)</td>
</tr>
<tr>  <td bgcolor="#cccccc">tmuxバージョン</td>  <td>tmux 1.6 (tmux-1.6-3.el6.<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64)</td>
</tr>
</table> <h5>必要なファイルの準備</h5>
<p>ウィンドウとペインを生成するための以下のような設定ファイルを準備します。<br>ここではウィンドウとペイン生成用の２つのファイルと新規セッション起動時に読み込ませる1つのファイルの計3つのファイルを利用します。<br>各ファイルは、ここでは<code>~/tmux/config</code>以下に設置するものとしています。 </p> <u><b>~/tmux/config/tmux.window.1</b></u><p>1つめの新規ウィンドウとそのペイン生成用のファイルの例です。 </p>
<pre class="terminal">  ### 1st Window ## Create New Window new-window -1st  ## Horizontal split splitw -d # Vertical split splitw -h -d # Vertical split splitw -h -d ## Pane Resize(Over 7 lines) resize-pane -U 7  # Move Right Pane select-pane -R  # Move Right Pane select-pane -R # Vertical split splitw -h -d  # Move Right Pane select-pane -R clock  # Move Under Pane select-pane -D  </pre> <u><b>~/tmux/config/tmux.window.2</b></u><p>2つめの新規ウィンドウ生成とそのペイン生成用のファイルの例です。 </p>
<pre class="terminal">  ### 2nd Window ## Create New Window new-window -n 2nd  # Vertical split split-window -h -d # Move Right Pane select-pane -R  # Horizontal split split-window -d # Move Under Pane select-pane -D  # Horizontal split splitw -d # Move Under Pane select-pane -D  # Display Clock clock-mode  # Move Left Pane select-pane -L  </pre> <u><b>~/tmux/config/tmux.startup</b></u><p>新規セッション起動時に読み込ませるファイルの例です。<br><code>~/tmux/config/tmux.window.1</code> と <code>~/tmux/config/tmux.window.2</code> の2つのウィンドウ、ペイン作成用ファイルを読み込ませるように記述しています。 </p>
<pre class="terminal">  ### Layout of Window Number 1 source-file ~/tmux/config/tmux.window.1  ### Layout of Window Number 2 source-file ~/tmux/config/tmux.window.2  </pre> <h5>作成したファイルを読み込ませてtmuxを起動</h5>
<p>tmuxの内部コマンドは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF">セミ</a>コロンで区切ることで複数のコマンドを指定して実行することができます。なお、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF">セミ</a>コロンはバックスラッシュ<code>\</code>で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>ケープする必要があります。 </p>
<p>新規セッション起動時に外部ファイルを読み込ませる場合は、以下のように指定します。 </p>
<pre class="terminal">  $ tmux new-session \; source-file 設定ファイルPATH  </pre> <p>作成した設定ファイルを読み込ませるようにしてtmuxのセッションを起動します。<code>~/tmux/config/tmux.startup</code>内に記載した各ファイルも読み込まれて、ウィンドウとペインが自動で作成されます。 </p>
<pre class="terminal">  $ tmux new-session \; source-file ~/tmux/config/tmux.startup  </pre> <p>無事、起動後に、以下のような2つのウィンドウが作成され、それぞれのウィンドウにペイン分割がされていることが確認できました。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-yEQM8QrczMk/UxqkgTBhTNI/AAAAAAAAAf4/Ky6Ff2q1GJg/s1600/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2014-03-08+13.58.04.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-yEQM8QrczMk/UxqkgTBhTNI/AAAAAAAAAf4/Ky6Ff2q1GJg/s640/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2014-03-08+13.58.04.png"></a></div> <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-A_oLKv9fop0/Uxqkh7kBYrI/AAAAAAAAAgA/Pd3wabCh2Zc/s1600/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2014-03-08+14.01.30.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/dshimizu/20220322/20220322113647.png"></a></div> <h4>おわりに</h4>
<p>新規tmuxセッション起動時に、自動で複数のウィンドウを作成してペイン分割する方法について、記載しました。<br>ここでは記載していませんが、必要なコマンドを実行したり各サーバへ<a class="keyword" href="http://d.hatena.ne.jp/keyword/ssh">ssh</a>接続するように各設定ファイル内へ記述しておくこともできます。オペレーション用のウィンドウ、ペイン作成や、実行するコマンドを tmux セッション起動時に一括して動作するように設定しておくと非常に楽で便利かと思います。 screenほど多機能ではないと言われていますが、これが出来るだけでもtmuxも十分使っていけそうです。 </p>
</body>

<!-- more -->


