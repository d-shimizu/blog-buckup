---
layout: post
Categories:  ["tech"]
Description:  " はじめに  node.jsはサーバーサイドで実行できるJavaScript環境で昨今利用する人が増えているように感じ僕も最近触り始めましたが、新しいバージョンのリリースが頻繁で、node.jsのバージョンとコードの管理が煩雑になることが多"
Tags: ["Node.js", "tech", "Ubuntu"]
date: "2016-10-15T11:07:00+09:00"
title: "NVMでnode.js環境構築とHello World"
author: "dshimizu"
archive: ["2016"]
draft: "true"
---

<body>
<h3>はじめに</h3>


<p>node.jsはサーバーサイドで実行できる<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>環境で昨今利用する人が増えているように感じ僕も最近触り始めましたが、新しいバージョンのリリースが頻繁で、node.jsのバージョンとコードの管理が煩雑になることが多いと思います。
今回は、Node.jsの複数のバイナリバージョンを管理できる NVM(Node Version Manager) を使ってみたいと思います。</p>

<p>その際の手順をまとめておくことにします。</p>
</body>

<!-- more -->

<body>
<h3>node.jsとは</h3>


<p>node.jsはサーバーサイド<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>実行環境です。
サーバサイド<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>とは、簡単に言うと、「Webサーバ上で<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>プログラムを動作させ、そのプログラムに処理が要求されるたびに、結果をウェブブラウザに対して送信するようなプログラム」のことです。</p>

<h3>NVMとは</h3>


<p>NVM(Node Version Manager)は名前の通り Node.js のバージョンを管理するツールです。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>で言うところの rbenv とかに近いと思います。
まずはNVMをインストールして、NVMを利用して node.js をインストールします。</p>

<h4>環境</h4>


<h4>環境</h4>


<table>
<tbody>
<tr>
<th>OS</th>
<td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 16.04 LTS(4.4.0-21-generic)</td>
</tr>
<tr>
<th>NVM(Node Version Manager)</th>
<td>0.32.0</td>
</tr>
<tr>
<th>node.jsバージョン</th>
<td>v4.6.0</td>
</tr>
</tbody>
</table>


<h3>NVMのインストール</h3>


<h4>NVMのインストール</h4>


<p>公式手順をもとにインストールを行います。</p>

<ul>
    <li><a href="https://github.com/creationix/nvm#installation" target="_blank" rel="noopener noreferrer">GitHub - creationix/nvm: Node Version Manager - Simple bash script to manage multiple active node...</a></li>
</ul>


<p>インストール<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を取得してそのまま<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>に渡して実行します。</p>

<pre class="terminal"> $ curl -o- https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash
 </pre>


<p>使っているシェルの設定ファイルに以下を追記します。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>の場合は以下です。</p>

<pre class="terminal"> $ vim ~/.bashrc
### 以下を追記
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; . "$NVM_DIR/nvm.sh" # This loads nvm
 </pre>


<p>設定ファイルを再読み込みします。</p>

<pre class="terminal"> $ source ~/.bashrc
 </pre>


<p>これでNVMがインストールできました。</p>

<h5>NVMを使う</h5>


<p>以下のコマンドで詳しい使い方を参照できます。</p>

<pre class="terminal"> $ nvm help
 </pre>


<p>いくつか使ってみます。
以下のコマンドでNVMのバージョンを確認できます。</p>

<pre class="terminal"> $ nvm --version
0.32.0
 </pre>


<p>以下のコマンドで利用可能な node.js のバージョンを確認できます。</p>

<pre class="terminal"> $ nvm ls-remote
        v0.1.14
        v0.1.15
        v0.1.16
         :
         :
 </pre>


<h3>node.jsのインストール</h3>


<p>NVMでnode.jsをインストールします。
インストールには <code>nvm install</code> コマンドを使います。</p>

<p>インストールされたnode.js関連ファイルは<code>~/.nvm/versions/node/{Node.jsバージョン}</code>に配置されます。</p>

<h4>長期安定版(LTS)のインストール</h4>


<p>Node.js はアップデートが頻繁にあり、かなり多くのバージョンが存在します。
まずは最新の長期安定版(LTS)のNode.jsをインストールしてみます。</p>

<pre class="terminal"> $ nvm install v4.6.0
 </pre>


<h4>安定版(stable)のインストール</h4>


<p>最新安定版(stable)のNode.jsをインストールしてみます。</p>

<pre class="terminal"> $ nvm install v6.8.1
 </pre>


<h3>インストール済みnode.jsの確認/切り替え</h3>


<p>インストール済みnode.jsを確認するには<code>nvm list</code>または<code>nvm ls</code>のコマンドを実行します。</p>

<pre class="terminal"> $ nvm list
         v4.6.0  
-&gt;       v6.8.1  
default -&gt; 4.6.0 (-&gt; v4.6.0)
node -&gt; stable (-&gt; v6.8.1) (default)
stable -&gt; 6.8 (-&gt; v6.8.1) (default)
iojs -&gt; N/A (default)
lts/* -&gt; lts/argon (-&gt; v4.6.0)
lts/argon -&gt; v4.6.0
 </pre>


<p>利用するNode.jsのバージョンを指定します。</p>

<pre class="terminal"> % nvm use 4.6.0
Now using node v4.6.0 (npm v2.15.9)
 </pre>


<pre class="terminal"> % node -v
v4.6.0
 </pre>


<p>デフォルトで使用するnode.jsのバージョンを指定するには、下記コマンドを実行します。</p>

<pre class="terminal"> $  nvm alias default 4.6.0
default -&gt; 4.6.0 (-&gt; v4.6.0)
 </pre>


<h3>Node.jsで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>
</h3>


<p>以下のようなコードを書いて保存します。
ファイル名は適当に <code>hello-world.js</code> とかにしておきます。
保存する場所はとりあえず今はどこでも良いです。</p>

<pre class="terminal"> const http = require('http');

const hostname = '127.0.0.1'; // &lt;-node.jsを実行するサーバのIPの指定
const port = 15000;           // &lt;-ポートの指定

http.createServer((req, res) =&gt; {
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.end('Hello World\n');
}).listen(port, hostname, () =&gt; {
  console.log(`Server running at http://${hostname}:${port}/`);
});
 </pre>


<p>実行してみます。</p>

<pre class="terminal"> $ node hello-world.js
Server running at http://127.0.0.1:15000/
 </pre>


<p>ブラウザから <code>http://127.0.0.1:15000/</code> アクセスして <code>Hello World</code> と表示されれば問題なしです。</p>

<h4>おわりに</h4>


<p>NVMのインストールとNVMを使ったnode.jsのインストールを行いました。
なお同じようなツールとして nodebrew があります。nodeberwはまだ使ったことがないのでどちらが良いのかわかりません。</p>

<h3>参考</h3>


<ul>
    <li><a href="https://github.com/creationix/nvm" target="_blank" rel="noopener noreferrer"> nvm </a></li>
</ul>

</body>
