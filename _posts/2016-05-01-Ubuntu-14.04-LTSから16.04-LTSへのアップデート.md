---
layout: post
Categories:  ["tech"]
Description:  " はじめに  Ubuntu 16.04 LTSがリリースされました。そこで今回は，前回のLTSであるUbuntu 14.04から，最新のLTSであるUbuntu 14.04へアップグレード手順、わらかなかったことや知っておいたほうが良いこと"
Tags: ["tech", "Ubuntu"]
date: "2016-05-01T23:09:00+09:00"
title: "Ubuntu 14.04 LTSから16.04 LTSへのアップデート"
author: "dshimizu"
archive: ["2016"]
draft: "true"
---

<body>
<h3>はじめに</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 16.04 LTSがリリースされました。そこで今回は，前回のLTSである<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 14.04から，最新のLTSである<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 14.04へアップグレード手順、わらかなかったことや知っておいたほうが良いことなどをまとめました。</p>
</body>

<!-- more -->

<body>
<h3>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>のリリースサイクル</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>のリリースには長期サポート(LTS:Long Term Support) 版と通常版の2つがあり、毎年4月と10月，半年毎の定期的なリリースが行われています。</p>

<h4>長期サポート(LTS)版</h4>


<p>長期サポート(LTS)版は2年間隔でリリースされ、サポート期間はリリースから5年になっています。安定した環境を望むユーザーに向いています。</p>

<h4>通常版</h4>


<p>通常版のサポート期間はリリースから9ヶ月です。そのため通常版を使うユーザーは、現在利用しているバージョンの次のリリース後、3か月以内には新しいリリースにバージョンアップをしなければならないことになります。新しい機能を含む最新のリリースを使うことを望むユーザーに向いています。
※13.04以前のバージョンでは通常版のサポート期間は18ヶ月であったが、管理にかかる費用を削減するために現在の9ヶ月に短縮されたようです。</p>

<h4>ポイントリリース</h4>


<p>ポイントリリースは，LTSが対象で、リリース後〜特定期間内に提供される最新アップデートパッケージ群を適用したインストールメディアです。
ポイントリリースではバージョン番号の後ろに数字を追加します。16.04だと16.04.1となり、2016年7月21日にリリース予定です。</p>

<h3>パッケージの分類とそのサポート</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>で扱われる全てのソフトウェアは、そのライセンスやサポートレベルによって、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>と呼ばれる4つの種類に分かれています。
以下の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>があり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>が分かれています。</p>

<ul>
    <li>Main</li>
サポートあり。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Canonical">Canonical</a>がパッケージを作って管理している。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>ライセンスポリシーに適合したソフトウェアのみが含まれる。
    <li>Restricted</li>
サポートあり。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Canonical">Canonical</a>がパッケージを作って管理しているものの、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>に手を入れることができない(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>ライセンスポリシーに適合できない)もので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%A4%A5%B9%A5%C9%A5%E9%A5%A4%A5%D0">デバイスドライバ</a>(バイナリ)など<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>を利用するために必要なソフトウェアが含まれる。これらのソフトウェアについては開発者が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を読むことができないので、mainに比べるとサポートのレベルは落ちる。
    <li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Universe">Universe</a></li>
サポートなし。ボランティアで構成される開発コミュニティによって管理されている。場合によってはいつまでたっても修正されないということもある。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>なソフトウェアなどが含まれる。
    <li>Multiverse</li>
サポートなし。ボランティアで構成される開発コミュニティやソフトウェアの開発元によって管理されている。場合によってはいつまでたっても修正されないということもある。他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>に該当しないものがここに含まれる。</ul>


<p>他に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> Backportsという公式の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>があります。
これは、特定のソフトウェアに対して過去の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>のリリースで利用可能な最新版をバックポートするための公式的に認められたプロジェクトである。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>は対極的に管理されているわけではなく、利用者からの要求に対して一定の品質を満たしさえすれば、そのパッケージがバックポートされ、安全にシステムの他の部分に影響を与えることなく更新することができる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%BF%A5%F3%A5%C9%A5%A2%A5%ED%A5%F3">スタンドアロン</a>アプリケーションの新しいバージョンを提供します。</p>

<p>安全に使いたい場合は、サポート/メンテナンスが約束されているmainとrestrictedのパッケージに限定すると良いかもしれせん。</p>

<h3>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>で提供されるアップデート</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>では上記4つの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>に対して、以下のアップデートが提供されます。</p>

<ul>
    <li>"distribution名"-security</li>
重要なセキュリティアップデートです。
    <li>"distribution名"-updates</li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%B0%A5%D5%A5%A3%A5%C3%A5%AF%A5%B9">バグフィックス</a>・機能強化のためのアップデートです。
    <li>"distribution名"-proposed</li>
更新されたパッケージのベータ版が提供されるアップデートです。
    <li>"distribution名"-backports</li>
最新版などで取り込まれた、新しいバージョンのソフトウェアが提供されるアップデートです。</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a>のパッケージ開発においては，securityやupdates用の開発者が「パッケージのメンテナが作成作業を行い、proposedに配信されて問題が解決しているか、新たなバグがないかをチェックされた後に、正式にsecurityやupdatesとして配信、という流れで作成・配信が行われます。
そのため、適用するアップデートは基本的にsecurityだけにして、必要に応じてupdatesを適用するのが良いと思われます。
backportsやproposedは使わない方が良いでしょう。</p>

<h3>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 14.04 LTSを16.04 LTSへアップデート手順</h3>


<p>遅くなりましたが、アップデート手順です。</p>

<h4>既存パッケージの最新化</h4>


<p>まず、既存のパッケージをアップデートします。</p>

<pre class="terminal"> $ apt-get update &amp;&amp; apt-get dist-upgrade
 </pre>


<p>upgradeが適用されている場合は再起動を実施します。</p>

<pre class="terminal"> $ sudo shutdown -r now
 </pre>


<h4>14.04 LTSから16.04 LTSへのメジャーアップデート</h4>


<p>do-release-upgradeを使うためにはupdate-manager-coreパッケージが必要なため、インストールされていない場合はインストールします。</p>

<pre class="terminal"> $ apt-get install update-manager-core
 </pre>


<p>do-release-upgradeコマンドでアップデートを実行します。</p>

<pre class="terminal"> $ sudo do-release-upgrade -d
 </pre>


<p>以下のように更新パッケージの確認や更新処理のほか、所々で変更点の確認や処理を継続するかなどが問われますので、内容を確認して処理を進めます。
更新完了後に再起動を実行するか問われますので、問題なければここで再起動を実行します。</p>

<pre class="terminal"> Checking for a new Ubuntu release
Get:1 Upgrade tool signature [198 B]
Get:2 Upgrade tool [1264 kB]
Fetched 1264 kB in 0s (0 B/s)
authenticate 'xenial.tar.gz' against 'xenial.tar.gz.gpg'
extracting 'xenial.tar.gz'


Reading cache

Checking package manager

Continue running under SSH?

This session appears to be running under ssh. It is not recommended
to perform a upgrade over ssh currently because in case of failure it
is harder to recover.

If you continue, an additional ssh daemon will be started at port
'1022'.
Do you want to continue?

Continue [yN] y

Starting additional sshd

To make recovery in case of failure easier, an additional sshd will
be started on port '1022'. If anything goes wrong with the running
ssh you can still connect to the additional one.
If you run a firewall, you may need to temporarily open this port. As
this is potentially dangerous it's not done automatically. You can
open the port with e.g.:
'iptables -I INPUT -p tcp --dport 1022 -j ACCEPT'

To continue please press [ENTER]
:
:
:
System upgrade is complete.

Restart required

To finish the upgrade, a restart is required.
If you select 'y' the system will be restarted.

Continue [yN] y
 </pre>


<p>無事システムが起動してくれば、完了です。
起動後、バージョンが更新されていることを確認します。</p>

<pre class="terminal"> $ cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=16.04
DISTRIB_CODENAME=xenial
DISTRIB_DESCRIPTION="Ubuntu 16.04 LTS"
 </pre>


<pre class="terminal"> $ uname -a
Linux hostname 4.4.0-21-generic #37-Ubuntu SMP Mon Apr 18 18:33:37 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
 </pre>


<h3>おわりに</h3>


<p>Ubuntu14.04LTSからUbuntu16.04LTSへのアップデート手順についてまとめました。</p>

<h3>参考</h3>


<ul>
    <li><a href="https://help.ubuntu.com/community/Repositories/Ubuntu" target="_blank" rel="noopener noreferrer">Repositories/Ubuntu - Community Help Wiki</a></li>
    <li><a href="http://www.ubuntu.com/about/about-ubuntu/licensing" target="_blank" rel="noopener noreferrer">Licensing | About Ubuntu | Ubuntu</a></li>
    <li><a href="http://backports.ubuntuforums.org/" target="_blank" rel="noopener noreferrer">UbuntuBackports</a></li>
    <li><a href="https://help.ubuntu.com/community/UbuntuBackports" target="_blank" rel="noopener noreferrer">UbuntuBackports - Community Ubuntu Documentation</a></li>
    <li>
<a href="https://help.ubuntu.com/community/UbuntuBackports" target="_blank" rel="noopener noreferrer"></a><a href="http://gihyo.jp/admin/serial/01/ubuntu-recipe/0083" target="_blank" rel="noopener noreferrer">Ubuntu Weekly Recipe：第83回　アップデートの管理｜gihyo.jp … 技術評論社</a>
</li>
    <li><a href="http://gihyo.jp/admin/serial/01/ubuntu-recipe/0337" target="_blank" rel="noopener noreferrer">第337回　12.04から14.04へアップグレードする際に気をつけるべきこと｜gihyo.jp … 技術評論社</a></li>
    <li><a href="http://ascii.jp/elem/000/000/441/441502/index-3.html" target="_blank" rel="noopener noreferrer">ASCII.jp：～師範！　Ubuntuインストールしようと思います！～｜行っとけ！　Ubuntu道場！</a></li>
    <li><a href="http://ascii.jp/elem/000/000/441/441502/index-4.html" target="_blank" rel="noopener noreferrer">ASCII.jp：～師範！　Ubuntuインストールしようと思います！～ (4/5)｜行っとけ！　Ubuntu道場！</a></li>
</ul>

</body>
