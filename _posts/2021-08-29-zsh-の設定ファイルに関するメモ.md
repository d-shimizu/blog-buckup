---
layout: post
Categories:  ["tech"]
Description:  " 何となく .zshrc にまとめていたけど、どのファイルがどういう順番で読み込まれるのかわかってなかったので調べたメモ。  ドキュメントもある。   ZSH - Documentation   man zsh でも見れる "
Tags: []
date: "2021-08-29T15:06:00+09:00"
title: "zsh の設定ファイルに関するメモ"
author: "dshimizu"
archive: ["2021"]
draft: "true"
---

<body>
<p>何となく .zshrc にまとめていたけど、どのファイルがどういう順番で読み込まれるのかわかってなかったので調べたメモ。</p>

<p>ドキュメントもある。</p>

<ul>
<li><a href="https://zsh.sourceforge.io/Doc/">ZSH - Documentation</a></li>
</ul>


<p><code>man zsh</code> でも見れる</p>
</body>

<!-- more -->

<body>
<h2>設定ファイル一覧</h2>

<p>すると、設定ファイルには以下があることが書かれている。</p>

<pre class="code" data-lang="" data-unlink> $ZDOTDIR/.zshenv
$ZDOTDIR/.zprofile
$ZDOTDIR/.zshrc
$ZDOTDIR/.zlogin
$ZDOTDIR/.zlogout
${TMPPREFIX}* (default is /tmp/zsh*)
/etc/zshenv
/etc/zprofile
/etc/zshrc
/etc/zlogin
/etc/zlogout (installation-specific - /etc is the default) </pre>


<p><code>$ZDOTDIR</code> はデフォルトだと <code>$HOME</code> っぽい。</p>

<h2>読み込み順</h2>

<p><code>/etc/zshenv</code> が最初に読み込まれ上書き不可らしい。(自分の<a class="keyword" href="http://d.hatena.ne.jp/keyword/macOS">macOS</a> Catalina ではファイルは存在せず <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 20.04 では <code>/etc/zsh/zshenv</code> があった)</p>

<p>続いて、 <code>$ZDOTDIR/.zshenv</code> が読み込まれる。</p>

<p>続いて、ログインシェルの場合は <code>/etc/zprofile</code>  -&gt; <code>$ZDOTDIR/.zprofile</code> が読み込まれる。</p>

<p>続いて、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>シェルの場合は <code>/etc/zshrc</code>  -&gt; <code>$ZDOTDIR/.zshrc</code> と読み込まれる。</p>

<p>最後に、ログインシェルの場合、<code>/etc/zlogin</code> と <code>$ZDOTDIR/.zlogin</code> が読み込まれる。</p>

<p>ログインシェルが終了すると、 <code>$ZDOTDIR/.zlogout</code> -&gt; <code>/etc/zlogout</code> が読み取られる。</p>

<h2>設定場所</h2>

<p>普通にログインユーザーとして読み込ませたい場合は <code>~/.zshrc</code> に書いておけば良さそうに思われる。
細かく分けたい場合は、 <code>/etc/zprofile</code>,  <code>$ZDOTDIR/.zprofile</code> に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>設定とかを書けば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>実行時に使われるようになる。
全ユーザーに適用させたい場合は <code>/etc/z*</code> に書く感じになりそう。
<code>/etc/.zshenv</code>, <code>$ZDOTDIR/.zshenv</code> は常に呼び出されるみたいなので、最小限の設定に留めておくのが良さそう。</p>
</body>
