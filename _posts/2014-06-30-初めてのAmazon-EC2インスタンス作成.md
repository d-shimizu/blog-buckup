---
layout: post
Categories:  ["tech"]
Description:  " はじめに  いろいろあって個人でのAWSアカウントを取得しましたので、実際に初めてEC2インスタンス作成した際のことについて記載します。単なる作業ログで特に面白いことはありません。    アカウント作成  当然ながらまずはAWSアカウント"
Tags: ["AWS", "EC2"]
date: "2014-06-30T23:34:00+09:00"
title: "初めてのAmazon EC2インスタンス作成"
author: "dshimizu"
archive: ["2014"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p>いろいろあって個人での<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>アカウントを取得しましたので、実際に初めてEC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>作成した際のことについて記載します。単なる作業ログで特に面白いことはありません。 </p> <a name="more"></a><h4>アカウント作成</h4>
<p>当然ながらまずは<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>アカウントを作成する必要がありますが、以下リンク先公式ドキュメントの手順通りにやれば良いです。 クレジットカードの情報が必須です。電話番号認証には驚きました。 </p>
<ul>  <li><a href="http://aws.amazon.com/jp/register-flow/">アカウント作成の流れ | アマゾン ウェブ サービス（AWS 日本語）</a></li>
</ul> <h4>EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>作成</h4>
<p>実際に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を作成する際、事前に検討する必要がある事項は以下かと思いますが、 ここでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPC">VPC</a>等他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>サービスを利用しておらず、初めてEC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を作成するものとしますので、概ねデフォルト値として各設定項目について細かくは記載しません。<br></p> <ul>  <li>AMIの選択(OS)</li>    EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>で使うAMI(ソフトウェア構成のテンプレート)を選択します。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>が準備しているものの他に、自分で作成したものを利用することもできます。後の変更ができないので、事前に検討しておく必要があります。<br>  <a href="http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/AmazonLinuxAMIBasics.html">Amazon Linux AMI の基本 - Amazon Elastic Compute Cloud</a>  <li>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>タイプ(CPU/メモリ)</li>    EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の用途に応じて<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>タイプ(CPU、メモリ、ストレージ、ネットワークなどのスペック)を検討します。後の変更も可能ですが、手間がかかるので予め必要なスペックを見積もって選択します。新しい<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>タイプがリリースされたり古い<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>タイプが使用不可になったりとよく変更が加わっているので、チェックが必要です。<br>    <a href="http://aws.amazon.com/jp/ec2/instance-types/">Amazon EC2 インスタンスタイプ</a>  <li>ストレージタイプ/サイズ (EBS)</li>    <a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon%20EC2">Amazon EC2</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>で使用するストレージについて検討します。要件に応じてストレージタイプや容量を決める必要があります。<br>    <a href="http://aws.amazon.com/jp/ebs/">Amazon Elastic Block Storage (EBS)</a>  <li>セキュリティグループ</li>    EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%D5%A5%A3%A5%C3%A5%AF">トラフィック</a>を制御するための<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%A4%A5%A2%A5%A6%A5%A9%A1%BC%A5%EB">ファイアウォール</a>のような機能です。作成したセキュリティグループをEC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>に紐付けて<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C4%CC%BF%AE%C0%A9">通信制</a>御を行います。<br>    <a href="http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-network-security.html">セキュリティグループの使用 - Amazon Elastic Compute Cloud</a><br>    デフォルトでは外部から内部(対象<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>)へのアクセスは<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>(22番ポート)のみ全てのIPから許可され、内部(対象<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>)から外部への通信は全て許可される    <li>その他の設定</li>  <ul>    <li>Network</li>    割り当てる仮想ネットワークを検討します。     <a class="keyword" href="http://d.hatena.ne.jp/keyword/VPC">VPC</a>と呼ばれる自分自身で制御できる仮想的なプライベートネットワーク環境を構築できるため、それを利用するのが一般的です。<br>    <a href="http://aws.amazon.com/jp/vpc/">Amazon Virtual Private Cloud </a><br>    現状では、デフォルトの<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPC">VPC</a>(172.31.0.0/16)とサブネット(172.31.0.0/16)があり、そこに所属することになります。     <li>Shutdown Behavior</li>      停止時のStop/Terminateの動作について設定します。     <li>Termination Protection</li>      Terminate(削除)できないようにするかどうか選択します。     <li>Monitoring Cloudwatch</li>      Cloudwatchを利用するかどうかを選択します。     <li>Tenancy</li>      EC2が稼動するHWを自分自身のものとして占有するかどうかを設定します。利用料が高くなります。   </ul>
</ul>
<p>なお、画面キャプチャは2014年6月末時点のものですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>の管理画面はいつの間にかUIが変わったり、新サービスのリリース等によって選択項目が変更されていることが多いので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%D3%A5%C7%A5%F3%A5%B9">エビデンス</a>としての画面キャプチャも役に立たなくなることが多いです。 </p> <h5>Launch Instance</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のManagement Consoleにログインし、左上のServicesからEC2を選択します。<br>EC2の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C0%A5%C3%A5%B7%A5%E5">ダッシュ</a>ボード画面の中央付近になる青い「Launch Instance」ボタンを押下します。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-3npwJhcul74/U7lcq_1yitI/AAAAAAAAAnE/fVF6JyrEM3c/s1600/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2014-07-06+23.26.55.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/dshimizu/20220322/20220322113640.png"></a></div> <h5>OSの選択</h5>
<p>作成するEC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>で利用するOSを選択します。ここでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>を選択します。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-nRi5sCZ44gI/U7ldTyQaHtI/AAAAAAAAAnM/hMXusuLvew4/s1600/create_ec2_instance_02.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-nRi5sCZ44gI/U7ldTyQaHtI/AAAAAAAAAnM/hMXusuLvew4/s640/create_ec2_instance_02.png"></a></div> <h5>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>タイプの選択</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>のタイプを選択します。後の変更も可能ですが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の停止が必要になります。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-fx5HCKfC3Xc/U7lfRJbfklI/AAAAAAAAAnY/Nzq5h1h4Gro/s1600/create_ec2_instance_03.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-fx5HCKfC3Xc/U7lfRJbfklI/AAAAAAAAAnY/Nzq5h1h4Gro/s640/create_ec2_instance_03.png"></a></div> <h5>その他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の設定</h5>
<p>作成する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の数、PublicIP割当の有無、ネットワーク、シャットダウン処理時の動作等を設定します。 ここではデフォルト設定のままとします。ネットワークはデフォルト<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPC">VPC</a>(172.31.0.0/16)に割り当てられます。PublicIPという<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B0%A5%ED%A1%BC%A5%D0%A5%EBIP">グローバルIP</a>が割り当てられるようにします。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/--rVxHexDV14/U7lgOIZLCyI/AAAAAAAAAng/-tJJ2QV1qSY/s1600/create_ec2_instance_04.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/dshimizu/20220322/20220322113632.png"></a></div> <h5>ストレージの選択</h5>
<p>ストレージのサイズ、タイプを選択します。選択するストレージのタイプによって料金体系も多少変わります。 </p>
<ul>  <li><a href="http://aws.amazon.com/jp/ebs/pricing/">料金 - Amazon Elastic Block Store (EBS ) EC2用ブロックストレージ | アマゾン ウェブ サービス（AWS 日本語）</a></li>
</ul>
<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-HFRR4p47b1s/U7lkzO-huDI/AAAAAAAAAns/C1AGIrzWNI4/s1600/create_ec2_instance_05.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-HFRR4p47b1s/U7lkzO-huDI/AAAAAAAAAns/C1AGIrzWNI4/s640/create_ec2_instance_05.png"></a></div> <h5>タグの設定</h5>
<p>インタンスへタグという形式の独自の情報を設定することができます。これは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の管理において利用するデータなもので、後で設定することもできるのでここでは何も入力せずに進みます。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-4HrZNGyjDSk/U7lm6Q_U3dI/AAAAAAAAAn4/Xp3Aa2eRAjc/s1600/create_ec2_instance_06.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/dshimizu/20220322/20220322113644.png"></a></div> <h5>セキュリティグループの設定</h5>
<p>セキュリティグループ(アクセス制御)の設定を行います。最初は何も設定がないので新規に作成する必要があります。デフォルトでは全ての<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a>から<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>(22番ポート)へのアクセスと、全てのIP/ポートへの外部アクセスのみ可能になります。 ここではデフォルトのままにしていますが、必要に応じて設定を行います。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-pzgha62VDIQ/U7lpgeq8zSI/AAAAAAAAAoE/7C5MK7tSd4A/s1600/create_ec2_instance_07.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-pzgha62VDIQ/U7lpgeq8zSI/AAAAAAAAAoE/7C5MK7tSd4A/s640/create_ec2_instance_07.png"></a></div> <h5>設定内容の確認</h5>
<p>設定内容を確認します。問題なければ「Launch」を押下します。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-lGZ1uM3KIAg/U7ltGtV6S6I/AAAAAAAAAoQ/11Jhp9KL1_k/s1600/create_ec2_instance_08.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/dshimizu/20220322/20220322113800.png"></a></div> <p>ログイン用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>の生成を求められます。鍵の名前を入力してダウンロードし、「Launch Instance」ボタンを押下します。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-N5Iq0B0049I/U7lt6VDRVEI/AAAAAAAAAog/FV4v6SFE65Q/s1600/create_ec2_instance_10.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-N5Iq0B0049I/U7lt6VDRVEI/AAAAAAAAAog/FV4v6SFE65Q/s640/create_ec2_instance_10.png"></a></div> <h5>インタンス生成開始</h5>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>作成処理が開始されます。 </p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-HIDvGOBvtZ0/U7luQ4xvBFI/AAAAAAAAAoo/ddGUMFV5ED4/s1600/create_ec2_instance_11.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-HIDvGOBvtZ0/U7luQ4xvBFI/AAAAAAAAAoo/ddGUMFV5ED4/s640/create_ec2_instance_11.png"></a></div> <p>これで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>作成は完了です。 </p>
<p>EC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>のPublicIPを確認し、生成した<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>を用いてec2-userというアカウントでEC2<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>のPublicIPへアクセスし、OSへログインできます。 </p> <h4>おわりに</h4>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>のManagement Consoleすごいですね。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>は簡単に作成出来ました。ただOSへの細かいリソース割り当てやディスク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%C6%A5%A3%A5%B7%A5%E7%A5%F3">パーティション</a>と言った設定はできないようなので意識する必要があるかも知れません。 </p>
</body>

<!-- more -->


