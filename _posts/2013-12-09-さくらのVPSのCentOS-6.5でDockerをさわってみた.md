---
layout: post
Categories:  ["tech"]
Description:  " はじめに  2013/11/21にRHEL 6.5がリリースされ、コンテナ型の仮想化ソフトウェア「Docker」への対応が発表されました。 以下リンク先の情報の通り、完全に「Docker」がサポートされた訳ではないため、利用するには外部リ"
Tags: ["Docker", "さくらのVPS", "CentOS"]
date: "2013-12-09T02:56:00+09:00"
title: "さくらのVPSのCentOS 6.5でDockerをさわってみた"
author: "dshimizu"
archive: ["2013"]
draft: "true"
---

<body>
<h4>はじめに</h4>
<p>2013/11/21に<a class="keyword" href="http://d.hatena.ne.jp/keyword/RHEL">RHEL</a> 6.5がリリースされ、コンテナ型の仮想化ソフトウェア「Docker」への対応が発表されました。<br>以下リンク先の情報の通り、完全に「Docker」がサポートされた訳ではないため、利用するには外部<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>からDockerのパッケージを追加する必要があります。 </p>
<ul>  <li><a href="http://japan.internet.com/busnews/20131125/7.html">Red Hat、RHEL 6.5 をリリース ― PTP、プライベート認証局、コンテナ型仮想化技術「Docker」</a></li>
</ul>
<p>なお、Dockerも2013/11/26にバージョン0.7がリリースされ、主要<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux%A5%C7%A5%A3%A5%B9%A5%C8%A5%EA%A5%D3%A5%E5%A1%BC%A5%B7%A5%E7%A5%F3">Linuxディストリビューション</a>への対応が発表されました。その中には<a class="keyword" href="http://d.hatena.ne.jp/keyword/RHEL">RHEL</a>も含まれています。 </p>
<ul>  <li><a href="http://blog.docker.io/2013/11/docker-0-7-docker-now-runs-on-any-linux-distribution/">Docker 0.7 runs on all Linux distributions – and 6 other major features | Docker Blog</a></li>
</ul> <p>RHEL6.5に追従して、先日(2013/12/1)、<a class="keyword" href="http://d.hatena.ne.jp/keyword/RHEL">RHEL</a>のクローンとなる<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a>のバージョン6.5がリリースされたので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a> 6.5の環境にDockerをインストールしてみました。以下に記載します。 </p>
<ul>  <li><a href="http://wiki.centos.org/Manuals/ReleaseNotes/CentOS6.5">CentOS 6.5 Release Notes</a></li>
</ul>
<a name="more"></a> <h4>Dockerのインストールと動作確認</h4>
<h5>環境</h5>
<p>インストール環境は以下です。 </p>
<table>
<tr>  <td bgcolor="#cccccc">プラットフォーム</td>  <td>さくらの<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPS">VPS</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SSD">SSD</a> 2Gモデル</td>
</tr>
<tr>  <td bgcolor="#cccccc">OS</td>  <td>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a> 6.5 <a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64 (<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AB%A1%BC%A5%CD%A5%EB">カーネル</a>バージョン 2.6.32-431.el6.<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64)</td>
</tr>
</table> <h5>Dockerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/RPM">RPM</a>パッケージインストール</h5>
<p>Dockerの公式ドキュメントやDocker社(旧dotCloud社)の公式ブログの情報を元にインストールを行います。 </p>
<p></p>
<ul>  <li><a href="http://docs.docker.io/en/latest/installation/rhel/">Requirements and Installation on Red Hat Enterprise Linux / CentOS - Docker Documentation</a></li>  <li><a href="http://cloudcounselor.com/2013/12/05/docker-0-7-redhat-centos-6-5/">Docker 0.7 &amp; [RedHat | CentOS] 6.5 | CloudCounselor</a></li>
</ul>
<p>インストールはrootユーザで行います。rootユーザにスイッチします。 </p>
<pre class="terminal">  $ su - パスワード:  
</pre>
<p>Dockerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/RPM">RPM</a>パッケージは<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a>標準<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>には存在せず、EPEL<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>にあります。<br>EPEL<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>がない場合はEPEL<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>のパッケージをインストールします。 </p>
<pre class="terminal">  # rpm -ihv http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm  
</pre>
<p>Dockerのパッケージをインストールします。lxc(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a> Containers)などが依存パッケージとしてインストールされます。 </p>
<pre class="terminal">  # yum install docker-io  
</pre>
<p>Dockerのサービスを起動します。 </p>
<pre class="terminal">  # /etc/init.d/docker start Starting cgconfig service:                                 [  OK  ] Starting docker:                                    [  OK  ]  
</pre>
<p>Dockerのインストールはこれで完了です。 </p> <h5>CentOS6のコンテナ作成</h5>
<p>CentOS6のコンテナを作成してみます。 </p>
<p>Docker社の<a class="keyword" href="http://d.hatena.ne.jp/keyword/GIthub">GIthub</a>から<a class="keyword" href="http://d.hatena.ne.jp/keyword/CentOS">CentOS</a>のImage作成用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を取得します。<br>現在は<code>mkimage-centos.sh</code>から<code>mkimage-rinse.sh</code>になっていますので過去のコミットログから<code>mkimage-centos.sh</code>を取得します。 </p>
<pre class="terminal">  # cd /tmp  
</pre>
<pre class="terminal">  # wget https://github.com/dotcloud/docker/blob/8afb0abbee0ff135a5314d7078285378b8f49c93/contrib/mkimage-centos.sh  </pre> <p>取得した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>に実行権を付与して、実行します。<br>必要なパッケージが取得され、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%A4%A5%EB%A5%B7%A5%B9%A5%C6%A5%E0">ファイルシステム</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>(ここでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/centos">centos</a>-64.tar.xz)が作成されます。 </p>
<pre class="terminal">  # chmod 775 mkimage-centos.sh  </pre> <pre class="terminal">  # ./mkimage-centos.sh  </pre> <pre class="terminal">  # ls centos-64.tar.xz  </pre> <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%A4%A5%EB%A5%B7%A5%B9%A5%C6%A5%E0">ファイルシステム</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>をDockerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>へインポートします。"centos6_<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64"の部分は好きな名前を指定します。 </p>
<pre class="terminal">  # cat centos-64.tar.xz | docker import - centos6_x86_64 f4f3b9b79842a9b3f7e0e1ea7ade3d2d0e4af6d0597165bffedbb99798c9fd09  </pre> <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>へインポートされた情報を確認します。 </p>
<pre class="terminal">  # docker images -notrunc REPOSITORY          TAG                 IMAGE ID                                                           CREATED             SIZE centos6_x86_64      latest              f4f3b9b79842a9b3f7e0e1ea7ade3d2d0e4af6d0597165bffedbb99798c9fd09   6 hours ago         300.2 MB (virtual 300.2 MB)  </pre> <p>先ほどインポートした<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>のイメージを元に、コンテナを起動します。<br><code>-t</code>オプションの後ろにコンテナ作成に利用したい<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>名:タグ名を指定します。タグ名は省略可能です。ここでは上記で登録した"centos6_<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64(:latest)"を指定しています。 <code>/bin/bash</code>を指定して、コンテナの<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>を起動しコンテナを操作します。この場合、<code>-i</code>オプションを付けて<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>(対話)モードにする必要があります。<br>※dockerでは基本的に1つのコンテナ起動時に指定した1つのプロセスを実行するような形になるようです。 </p>
<pre class="terminal">  # docker run -i -t centos6_x86_64:latest /bin/bash bash-4.1#  
</pre>
<pre class="terminal">  bash-4.1# uname -a Linux 82a772e0e0de 2.6.32-431.el6.x86_64 #1 SMP Fri Nov 22 03:15:09 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux  </pre> <p>exitを実行すると、コンテナの<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>が終了します。 </p>
<pre class="terminal">  bash-4.1# exit  </pre> <h5>基本動作確認</h5>
<p>まだ分からない部分が多いのですが、マニュアルを見ながらいくつか触ってみました。 </p>
<ul>  <li><a href="http://docs.docker.io/en/latest/commandline/cli/">Command Line Interface - Docker Documentation </a></li>
</ul>
<p>dockerコマンドのオプションは以下です。 </p>
<pre class="terminal">  # docker help Usage: docker [OPTIONS] COMMAND [arg...]  -H=[unix:///var/run/docker.sock]: tcp://host:port to bind/connect to or unix://path/to/socket to use  A self-sufficient runtime for linux containers.  Commands:     attach    Attach to a running container     build     Build a container from a Dockerfile     commit    Create a new image from a container's changes     cp        Copy files/folders from the containers filesystem to the host path     diff      Inspect changes on a container's filesystem     events    Get real time events from the server     export    Stream the contents of a container as a tar archive     history   Show the history of an image     images    List images     import    Create a new filesystem image from the contents of a tarball     info      Display system-wide information     insert    Insert a file in an image     inspect   Return low-level information on a container     kill      Kill a running container     load      Load an image from a tar archive     login     Register or Login to the docker registry server     logs      Fetch the logs of a container     port      Lookup the public-facing port which is NAT-ed to PRIVATE_PORT     ps        List containers     pull      Pull an image or a repository from the docker registry server     push      Push an image or a repository to the docker registry server     restart   Restart a running container     rm        Remove one or more containers     rmi       Remove one or more images     run       Run a command in a new container     save      Save an image to a tar archive     search    Search for an image in the docker index     start     Start a stopped container     stop      Stop a running container     tag       Tag an image into a repository     top       Lookup the running processes of a container     version   Show the docker version information     wait      Block until a container stops, then print its exit code  </pre> <h6>コンテナの一覧表示(docker ps オプション)</h6>
<p><code>docker ps</code>コマンドの<code>-a</code>オプションでコンテナの一覧を表示してみます。<code>/bin/bash</code>が<code>Exit 0</code>となっているので正常に終了していることを示しています。 </p>
<pre class="terminal">  # docker ps -a CONTAINER ID        IMAGE                   COMMAND             CREATED             STATUS              PORTS               NAMES 82a772e0e0de        centos6_x86_64:latest   /bin/bash           4 hours ago         Exit 0                                  clever_davinci  </pre> <h6>コンテナの起動(docker start コンテナID)</h6>
<p>docker startコマンドで起動したいコンテナを指定して、コンテナを起動します。 </p>
<pre class="terminal">  # docker start 82a772e0e0de 82a772e0e0de  </pre> <p>コンテナのステータスがUPになりました。 </p>
<pre class="terminal">  # docker ps -a CONTAINER ID        IMAGE                   COMMAND             CREATED             STATUS              PORTS               NAMES 82a772e0e0de        centos6_x86_64:latest   /bin/bash           4 hours ago         Up 2 seconds                            clever_davinci  </pre> <h6>コンテナへの接続( docker attach コンテナID)</h6>
<p>コンテナへ<code>attach</code>(接続)してみます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>が起動します。 </p>
<pre class="terminal">  # docker attach 82a772e0e0de bash-4.1#  </pre> <p>exitを入力すると終了します。 </p>
<pre class="terminal">  bash-4.1# exit  
</pre>
<p>起動したままコンテナを<code>dettach</code>するには<code>Ctrl-p</code> + <code>Ctrl-q</code>を入力します。 </p>
<pre class="terminal">  bash-4.1# # #  </pre> <h6>コンテナの停止(docker stop コンテナID)</h6>
<p><code>docker stop</code>コマンドで停止したいコンテナを指定して、コンテナを停止します。 </p>
<pre class="terminal">  # docker stop 82a772e0e0de 82a772e0e0de  </pre> <h6>コンテナの設定情報表示(docker inspect コンテナID)</h6>
<p><code>docker inspect</code>でコンテナの設定情報を表示できます。 </p>
<pre class="terminal">  # docker inspect 82a772e0e0de [{     "ID": "82a772e0e0de28e69855223ea2695c8cd3309a7abaa856cfebc1b2272124ea7b",     "Created": "2013-12-08T10:17:05.541604445Z",     "Path": "/bin/bash",     "Args": [],     "Config": {         "Hostname": "82a772e0e0de",         "Domainname": "",         "User": "",         "Memory": 0,         "MemorySwap": 0,         "CpuShares": 0,         "AttachStdin": true,         "AttachStdout": true,         "AttachStderr": true,         "PortSpecs": null,         "ExposedPorts": {},         "Tty": true,         "OpenStdin": true,         "StdinOnce": true,         "Env": null,         "Cmd": [             "/bin/bash"         ],         "Dns": null,         "Image": "centos6_x86_64",         "Volumes": {},         "VolumesFrom": "",         "WorkingDir": "",         "Entrypoint": null,         "NetworkDisabled": false     },     "State": {         "Running": false,         "Pid": 0,         "ExitCode": 137,         "StartedAt": "2013-12-08T15:10:27.897931338Z",         "FinishedAt": "2013-12-08T17:03:44.120620099Z",         "Ghost": false     },     "Image": "f4f3b9b79842a9b3f7e0e1ea7ade3d2d0e4af6d0597165bffedbb99798c9fd09",     "NetworkSettings": {         "IPAddress": "",         "IPPrefixLen": 0,         "Gateway": "",         "Bridge": "",         "PortMapping": null,         "Ports": null     },     "SysInitPath": "/var/lib/docker/init/dockerinit-0.7.0",     "ResolvConfPath": "/etc/resolv.conf",     "HostnamePath": "/var/lib/docker/containers/82a772e0e0de28e69855223ea2695c8cd3309a7abaa856cfebc1b2272124ea7b/hostname",     "HostsPath": "/var/lib/docker/containers/82a772e0e0de28e69855223ea2695c8cd3309a7abaa856cfebc1b2272124ea7b/hosts",     "Name": "/clever_davinci",     "Driver": "devicemapper",     "Volumes": {},     "VolumesRW": {} }]#  </pre> <h6>コンテナイメージのコミット(docker commit コンテナID <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>名)</h6>
<p>登録しているコンテナに変更を加えた後は、その情報を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>にコミットすることができます。<br>新規コンテナ作成時にその<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>を指定して作成することで、同一環境を簡単に作成することができます。 </p>
<p>ID:<code>82a772e0e0de</code>のコンテナにパッケージを追加して試してみます。<br>dockerに<code>attach</code>します。 </p>
<pre class="terminal">  # docker attach 82a772e0e0de bash-4.1#  
</pre>
<pre class="terminal">  bash-4.1# rpm -qa | wc -l 125  
</pre>
<p>baseパッケージをインストールしてみます。 </p>
<pre class="terminal">  bash-4.1# yum groupinstall base  
</pre>
<p>パッケージ数を確認します。 </p>
<pre class="terminal">  bash-4.1# rpm -qa | wc -l 363  </pre> <p>コンテナを終了します。 </p>
<pre class="terminal">  bash-4.1# exit  </pre> <p>baseパッケージをインストールしたコンテナIDを指定して、<code>install/base</code>という名前で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>へ<code>commit</code>します。 </p>
<pre class="terminal">  # docker commit 82a772e0e0de install/base  </pre> <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>に<code>install/base</code>というイメージが登録されています。 </p>
<pre class="terminal">  # docker images REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE install/base        latest              68512dfeb565        3 hours ago         430.5 MB (virtual 730.7 MB) centos6_x86_64      latest              f4f3b9b79842        6 hours ago         300.2 MB (virtual 300.2 MB)  </pre> <p>新しくコンテナを作成する際に<code>-t</code>オプションで<code>install/base</code>を指定すると、baseパッケージがインストールされたCentOS6を起動できます。 </p>
<pre class="terminal">  # docker run -i -t install/base /bin/bash bash-4.1#  
</pre>
<p>パッケージ数が先ほど作成したものと一致しています。 </p>
<pre class="terminal">  bash-4.1# rpm -qa | wc -l 363  </pre> <p>コンテナの一覧を見ると新しく作成されたコンテナが表示されています。 </p>
<pre class="terminal">  # docker ps -a CONTAINER ID        IMAGE                   COMMAND             CREATED             STATUS              PORTS               NAMES 933b3258c5ba        install/base:latest     /bin/bash           18 seconds ago      Exit 0                                  compassionate_thompson 82a772e0e0de        centos6_x86_64:latest   /bin/bash           5 hours ago         Up 43 minutes                           clever_davinci  </pre> <h6>コンテナの削除(docker rm コンテナID)</h6>
<p>コンテナを削除したい場合は<code>docker rm</code>で削除したいコンテナIDを指定すると削除できます。 </p>
<pre class="terminal">  # docker rm 933b3258c5ba  
</pre>
<pre class="terminal">  # docker ps -a CONTAINER ID        IMAGE                   COMMAND             CREATED             STATUS              PORTS               NAMES 82a772e0e0de        centos6_x86_64:latest   /bin/bash           5 hours ago         Up 43 minutes                           clever_davinci  </pre> <h6>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>の削除(docker <a class="keyword" href="http://d.hatena.ne.jp/keyword/rmi">rmi</a> イメージID)</h6>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>の削除は<code>docker rmi</code>で削除したいイメージIDを指定します。 </p>
<pre class="terminal">  # docker images REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE install/base        latest              68512dfeb565        3 hours ago         430.5 MB (virtual 730.7 MB) centos6_x86_64      latest              f4f3b9b79842        6 hours ago         300.2 MB (virtual 300.2 MB)  </pre> <pre class="terminal">  # docker rmi 68512dfeb565  </pre> <pre class="terminal">  # docker images REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE centos6_x86_64      latest              f4f3b9b79842        6 hours ago         300.2 MB (virtual 300.2 MB)  </pre> <h6>dockerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%C8%A5%EA">レジストリ</a>からイメージの取得(docker pull イメージ名)</h6>
<p>今回、最初は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を使って<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%A4%A5%EB%A5%B7%A5%B9%A5%C6%A5%E0">ファイルシステム</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>からイメージを作成しましたが、Dockerの公式<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%C8%A5%EA">レジストリ</a>(<a href="https://index.docker.io/">https://index.docker.io/</a>)にもコンテナのイメージがあり、取得して利用することができます。 </p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/ubuntu">ubuntu</a>のイメージを取得してみます。 </p>
<pre class="terminal">  # docker pull ubuntu Pulling repository ubuntu 8dbd9e392a96: Download complete b750fe79269d: Download complete 27cf78414709: Download complete  
</pre>
<p>一覧が以下のようになってます。 </p>
<pre class="terminal">  # docker images REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE centos6_x86_64      latest              f4f3b9b79842        8 hours ago         300.2 MB (virtual 300.2 MB) ubuntu              12.04               8dbd9e392a96        8 months ago        128 MB (virtual 128 MB) ubuntu              latest              8dbd9e392a96        8 months ago        128 MB (virtual 128 MB) ubuntu              precise             8dbd9e392a96        8 months ago        128 MB (virtual 128 MB) ubuntu              12.10               b750fe79269d        8 months ago        175.3 MB (virtual 350.6 MB) ubuntu              quantal             b750fe79269d        8 months ago        175.3 MB (virtual 350.6 MB)  </pre> <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 12.10を起動する場合は以下のようにします。 </p>
<pre class="terminal">  # docker run -i -t ubuntu:12.10 /bin/bash root@4c7067de37e9:/#  </pre> <pre class="terminal">  root@4c7067de37e9:/# cat /etc/issue Ubuntu 12.10 \n \l  </pre> <p>また、自分でやってはいませんが、自身で作成したイメージを公式<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%B8%A5%B9%A5%C8%A5%EA">レジストリ</a>(<a href="https://index.docker.io/">https://index.docker.io/</a>)に登録することもできるようです。あらかじめサイト上でアカウントを作っておき、 <code>docker login</code>した後に<code>docker push</code>すると登録でき、外部のどこからでも作成した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>を参照することができるようになるようです。 </p> <h4>おわりに</h4>
<p>CentOS6.5へDockerをインストールして、コンテナの作成や簡単な動作を確認してみました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B2%BE%C1%DB%A5%DE%A5%B7%A5%F3">仮想マシン</a>の作成は割と容易にでき、起動も一瞬なので手軽に使えるイメージでした。<br>コンテナ型仮想化ということで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Solaris">Solaris</a>コンテナ(Zone)のようなイメージを持ってましたがそれよりはライトな感じで、仮想OS環境を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AC%A5%EA">ガリ</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AC%A5%EA">ガリ</a>使うというよりは、特定用途の環境をあらかじめ作っておき必要に応じてサクッと起動して使うような感じなんですね。 (例えば<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>の環境を作っておき、<code>docker run -p 10080:80 -d http("とかで手軽に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>環境を起動できるようにしておくような)<br>どのような使い方をするのが良いのかはまだわかりませんが、あらかじめ特定の環境を作成してそのコンテナイメージを登録しておき、必要なときに起動してテスト、不要となったら削除するといったような形でCIの仕組みに取り入れたりできそうなイメージでした。 </code></p>
</body>

<!-- more -->


