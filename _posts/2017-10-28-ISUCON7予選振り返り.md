---
layout: post
Categories:  ["tech"]
Description:  " ISUCONに初参加しました。  結果はタイトル通り予選敗退だったのですが振り返りとしてメモしておきます。 "
Tags: ["ISUCON", "tech", "イベント"]
date: "2017-10-28T19:17:00+09:00"
title: "ISUCON7予選振り返り"
author: "dshimizu"
archive: ["2017"]
draft: "true"
---

<body>
<p>ISUCONに初参加しました。</p>

<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fisucon.net%2Farchives%2F50949022.html" title="ISUCON7 まとめ : ISUCON公式Blog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe>


<p>結果はタイトル通り予選敗退だったのですが振り返りとしてメモしておきます。</p>
</body>

<!-- more -->

<body>
<h3>振り返り</h3>


<p>アプリケーションはチャットアプリケーションで、ISUCON初の3台のサーバでアプリケーションやDBを動かせる状態(３台を自由に使って良い)の複数台構成でした。またサーバ間のローカル通信の帯域が500Mbps、外部からの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%F3%A5%C1%A5%DE%A1%BC%A5%AF">ベンチマーク</a>ツールとの通信に使われる帯域が100Mbpsに制限されているというのもこれまでと違う点でした。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DF%A5%C9%A5%EB%A5%A6%A5%A7%A5%A2">ミドルウェア</a>は、WebサーバはNginx、DBは<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>とメジャーどころでしたが、fail2banが入っていて最初にログイン<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C9%D4%C7%BD">不能</a>になって焦りました。</p>

<p>結果的には、複数台構成において、DBに保存されていたチャットのア<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%B3%A5%F3%B2%E8">イコン画</a>像をファイルに吐き出し、その後に静的コンテンツとしてNginxで304で返すための対応を最後までうまくクリアできずにハマり続け、そのまま大してスコアを伸ばせず終わってしまいました。</p>

<h4>よかったこと</h4>


<ul>
    <li>事前準備やっとくのはよかった。
事前準備としては、過去のISUCON関連エントリ読んだり、やることリスト作ったりしました。
メンバーで過去問やって当日の流れの感覚を掴んだり使うツールの準備や練習をしといたのはよかったです。
古い過去問は、環境構築に必要なバージョンのパッケージがなくなったりしていてなかなか準備に手間がかかるので、それなりに新しめのを使うべきだと思いました。</li>
    <li>理解の浅いところとかわかった。
悪かった点でもありますが、Nginxでのキャッシュするための知識、HTTPの理解不足なところが多々あることろが浮き彫りなったと思います。</li>
</ul>


<h4>悪かったこと</h4>


<ul>
    <li>ハマった時点で冷静になるべきだった。
画像がキャッシュできない点でハマり、そのまま時間が経ち続けることで、個人的には浮き足立ってしまいました。一度冷静になれればよかったかもしれません。</li>
    <li>なし崩し的な対応になっていった。
キャッシュ戦略がうまく行かない焦りもあってなし崩し的な対応になってしまっていたので、この辺うまくやれればよかったです。
例えば、同一の役割のサーバが複数台ある構成で、ログやサーバリソースの監視、閲覧、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DF%A5%C9%A5%EB%A5%A6%A5%A7%A5%A2">ミドルウェア</a>の再起動を何度も繰り返すのとか以外と手間でしたが、そのまま手作業でやってしまってました。</li>
</ul>


<h3>まとめ</h3>


<p>ISUCON7に参加して惨敗したので、振り返りを書きました。
敗退となってしまいましたが、それでもまだまだHTTPやら何やら理解が浅いところが多々あることがわかり勉強になりました。</p>

<p>最後に、運営の皆様、素晴らしい機会をありがとうございました。</p>

<h3>参考</h3>


<ul>
    <li><a href="http://isucon.net/archives/50949740.html" target="_blank" rel="noopener noreferrer">ISUCON7 オンライン予選 関連エントリまとめ : ISUCON公式Blog</a></li>
    <li>
<a href="http://isucon.net/archives/50949740.html" target="_blank" rel="noopener noreferrer"></a><a href="http://isucon.net/archives/50961706.html" target="_blank" rel="noopener noreferrer">ISUCON7 予選問題の公開と解説 : ISUCON公式Blog</a>
</li>
    <li>
<a href="http://isucon.net/archives/50961706.html" target="_blank" rel="noopener noreferrer"></a><a href="http://isucon.net/archives/50960409.html" target="_blank" rel="noopener noreferrer">ISUCON7 予選開始の遅延について : ISUCON公式Blog</a>
</li>
</ul>

</body>
