---
layout: post
Categories:  ["tech"]
Description:  " Pythonの仮想環境構築とかバージョン管理するツールって何かいろいろありますが、結局何を使うのが良いのだろうか･･･と考えてみました。 "
Tags: ["Python", "tech"]
date: "2017-03-31T23:18:00+09:00"
title: "Python の環境構築ツールはどれを使うのが良いのか"
author: "dshimizu"
archive: ["2017"]
draft: "true"
---

<body>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の仮想環境構築とかバージョン管理するツールって何かいろいろありますが、結局何を使うのが良いのだろうか･･･と考えてみました。</p>
</body>

<!-- more -->

<body>
<h3>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>環境構築関連ツール</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 環境構築 [検索] とかやると、いろんなツールの情報が出てきます。
似たような名前のものが多くて最初は違いがよ～わからんってなります･･･というかなりました。
主なツールと超簡単な概要は以下のような感じかなと思います。</p>

<ul>
    <li>virtualenv
Pythonの<b>仮想環境構築ツール</b>。<code>virtualenv -p [使うバージョンのPythonのPATH] [仮想環境ディレクトリ名]</code> で指定した仮想環境<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ配下に指定した <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 実行環境を作成できるツール。</li>
    <li>virtualenvwrapper
virtualenvでの仮想環境の管理(作成とか切り替えとか削除とかの操作をラップしている)を手軽にできるようになるツール。</li>
    <li>venv
同じく<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の<b>仮想環境構築ツール</b>。Virtualenv相当のツールを Python3 で標準モジュールとして取り入れたもの。Virtualenv と大体同じような使い方ができる。Python2系では使えない。</li>
    <li>pyvenv
同じく<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の<b>仮想環境構築ツール</b>。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 3.3および 3.4 で推奨だった。内部的には venv モジュールがインポートされている。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 3.6で廃止。</li>
    <li>pyenv
Pythonの<b>バージョン管理ツール</b>。いろんなバージョンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>をインストールしたり、使うバージョンを手軽に切り替えたりといったことができる管理ツール。</li>
    <li>pyenv-virtualenv
pyenvの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>。pyenvでインストールした<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>を使って手軽に仮想環境を作れるようになる。
<code>pyenv virtualenv [Pythonバージョン] [仮想環境ディレクトリ名]</code> でpyenvでインストールした指定のバージョンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>実行環境を指定した仮想環境<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ配下へ作成できる (≒ <code>virtualenv -p [使うバージョンのPythonのPATH] [仮想環境ディレクトリ名]</code>)</li>
</ul>


<h3>結局何を使えば良いのか</h3>


<p>間違われやすいかもしれませんが、venvやvirtualenvなどの仮想環境ツールというのは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のバージョンを切り替えるツールではなく、同一バージョンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の中で、ライブラリの実行環境を複数構築して、切り替えることができるツールであるということです。</p>

<p>で、環境構築ツールですが、何を使うかはケースバイケース・・・と言ってしまうとそれまでですが、仮想環境構築してしまえばあとはよしなにできるので、Python3系のみの環境なら venv 使えば良いかなと思います。公式ドキュメントでも推奨されているので、今はこれが良いのかなと思ってます。
Python2系のみ、またはPython2系と3系を混在させる必要がある場合は venv　は使えないので virtualenv を使います。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>自体はpyenv使って手軽にインストールできますが、最近は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 16.04を使っていて、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 16.04にはPython2系(2.7),3系(3.5)両方のパッケージがあり、標準で比較的新しいバージョンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>が使えるので、あまり面倒なことをせず<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>自体はパッケージのものを使うことも多いです。venv or virtualenv で別途仮想環境を作るためだけに使うのでまぁ問題ないかなと思ってます。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/RHEL">RHEL</a>系とかだと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のパッケージが古いので必要なバージョンをソースビルドするか、pyenv使ったりしてます。
その他のツールはお好みで良いのかな〜と思ってます。</p>

<ul>
    <li><a href="https://docs.python.jp/3/library/venv.html" target="_blank" rel="noopener noreferrer">28.3. venv — 仮想環境の作成 — Python 3.6.1 ドキュメント</a></li>
</ul>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>自体のバージョン管理をしたい場合は pyenv を使えば良いのでないかと思います。</p>

<h4>※venvの使い方</h4>


<p><strong>仮想環境作成</strong></p>

<pre class="terminal"> $ python3 -m venv /path/to/new/venv_name   ※/path/to/new/venv_nameには好きなPATHを指定します。
 </pre>


<p><strong>仮想環境有効化</strong></p>

<pre class="terminal"> $ cd /path/to/new/venv_name
$ source bin/activate
 </pre>


<p><strong>仮想環境無効化</strong></p>

<pre class="terminal"> (${venv_name})$ deactivate
 </pre>


<h3>まとめ</h3>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の仮想環境構築ツールにどれを使うのが良いのか考えてみました。
今の所自分としてはPython3系のみの環境なら venv, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>２系なら virtualenvが良いのかなと思います。</p>
</body>
