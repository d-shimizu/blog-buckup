---
layout: post
Categories:  ["tech"]
Description:  " 開発用に雑な Ubuntu コンテナを作成する。 "
Tags: ["Docker", "tech"]
date: "2020-11-03T16:48:00+09:00"
title: "開発用に雑な Ubuntu コンテナを作成する"
author: "dshimizu"
archive: ["2020"]
draft: "true"
---

<body>
<p>開発用に雑な <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> コンテナを作成する。</p>
</body>

<!-- more -->

<body>
<p>まずベースとなる <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> 20.04 のイメージを取得してコンテナとして起動する。
取得するイメージで<code>CMD ["/bin/bash"]</code>するようになっているのでそのまま <a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a> が起動する。</p>

<pre class="terminal"> % docker run --name="ubuntu2004" -it ubuntu:20.04
Unable to find image 'ubuntu:20.04' locally
latest: Pulling from library/ubuntu
83ee3a23efb7: Pull complete
db98fc6f11f0: Pull complete
f611acd52c6c: Pull complete
Digest: sha256:****************************************************************
Status: Downloaded newer image for ubuntu:20.04
root@b7057b8b4f14:/#
 </pre>


<p>必要なものをインストールする。
ここではビルドに必要そうなパッケージを適当にインストールする。</p>

<pre class="terminal"> root@d124e9c0dbdb:/# apt update

root@d124e9c0dbdb:/# apt install -y curl vim git net-tools build-essential
 </pre>


<p>終わったら<code>bash</code>を終了させて、コンテナを停止する。</p>

<pre class="terminal"> root@d124e9c0dbdb:/# exit
 </pre>


<p><code>docker commit</code>でイメージを保存して、タグをつける。</p>

<pre class="terminal"> % docker commit ubuntu2004 localhost/ubuntu2004:v1.0.0
sha256:****************************************************************
 </pre>


<p>イメージを確認する。</p>

<pre class="terminal"> % docker images
REPOSITORY                                                         TAG               IMAGE ID       CREATED          SIZE
localhost/ubuntu2004                                               v1.0.0            2cf5d123178e   23 seconds ago   448MB
ubuntu                                                             20.04             f63181f19b2f   5 weeks ago      72.9MB
 </pre>


<p>作成したイメージからコンテナを起動する。</p>

<pre class="terminal"> % docker run -it localhost/ubuntu2004:v1.0.0
root@d124e9c0dbdb:/#
 </pre>




<h4>補足</h4>


<p>ある程度固まったら<code>Dockerfile</code>にして再利用性を高める。</p>

<pre class="terminal"> FROM ubuntu:20.04

RUN apt update &amp;&amp; \
    apt -y install curl vim git net-tools build-essential
 </pre>




<pre class="terminal"> % docker build -t localhost/ubuntu2004:v1.0.0 .
 </pre>




<pre class="terminal"> % docker run -it localhost/ubuntu2004:v1.0.0
 </pre>

</body>
